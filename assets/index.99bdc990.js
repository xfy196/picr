var V=Object.defineProperty,j=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var I=(e,t,n)=>t in e?V(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,g=(e,t)=>{for(var n in t||(t={}))G.call(t,n)&&I(e,n,t[n]);if(x)for(var n of x(t))W.call(t,n)&&I(e,n,t[n]);return e},O=(e,t)=>j(e,F(t));import{o as c,c as u,r as U,u as A,w as i,a as l,b as d,K as J,S as P,d as R,e as y,L as Q,$ as X,f as k,g as B,h as Y,i as $,j as Z,k as h,t as q,F as ee,_ as z,M,l as te,m as ne,n as se,p as C,q as oe,s as re,v as ae,x as ie,y as ce,z as le,A as ue,B as D,U as _e,C as de,D as pe,E as me,G as he,H as fe,I as ge,J as ve,N as ye,O as ke,P as $e,Q as we,R as Se,T as Ee}from"./vendor.472db396.js";const Le=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}};Le();var b=(e,t)=>{const n=e.__vccOpts||e;for(const[s,o]of t)n[s]=o;return n};const Ce={};function be(e,t){const n=U("router-view");return c(),u(n)}var xe=b(Ce,[["render",be]]);const Ie="modulepreload",T={},Oe="/picr/",v=function(t,n){return!n||n.length===0?t():Promise.all(n.map(s=>{if(s=`${Oe}${s}`,s in T)return;T[s]=!0;const o=s.endsWith(".css"),r=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${r}`))return;const a=document.createElement("link");if(a.rel=o?"stylesheet":Ie,o||(a.as="script",a.crossOrigin=""),a.href=s,document.head.appendChild(a),o)return new Promise((_,m)=>{a.addEventListener("load",_),a.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t())};const Pe=y("Loading ..."),Re=y("Loading ..."),De={setup(e){const t=A();return(n,s)=>{const o=U("router-view"),r=Q;return c(),u(r,{class:"layout__container"},{default:i(()=>[l(o,null,{default:i(({Component:a})=>[d(t).meta.keepAlive?(c(),u(J,{key:0},[(c(),u(P,null,{default:i(()=>[(c(),u(R(a),{key:d(t).path}))]),fallback:i(()=>[Pe]),_:2},1024))],1024)):(c(),u(P,{key:1},{default:i(()=>[(c(),u(R(a),{key:d(t).path}))]),fallback:i(()=>[Re]),_:2},1024))]),_:1})]),_:1})}}};var Te=b(De,[["__scopeId","data-v-7fbb0e0a"]]);const Ue=e=>{const{icon:t}=e;return l(X[t])},Ae={setup(e){const t=k(!1),n=A(),s=B(),o=k([]);let r=s.getRoutes();r=r.filter(_=>_.path!=="/"),Y(()=>n.path,_=>{o.value=[_]},{immediate:!0});const a=_=>{s.push(_.key)};return(_,m)=>{const S=z,E=M,L=te;return c(),u(L,{theme:"light",collapsed:t.value,"onUpdate:collapsed":m[1]||(m[1]=p=>t.value=p),collapsible:""},{default:i(()=>[l(E,{selectedKeys:o.value,"onUpdate:selectedKeys":m[0]||(m[0]=p=>o.value=p),mode:"inline",theme:"light",onClick:a,"inline-collapsed":t.value},{default:i(()=>[(c(!0),$(ee,null,Z(d(r),p=>(c(),u(S,{key:p.path},{icon:i(()=>[l(d(Ue),{icon:p.meta.icon},null,8,["icon"])]),default:i(()=>[h("span",null,q(p.meta.title),1)]),_:2},1024))),128))]),_:1},8,["selectedKeys","inline-collapsed"])]),_:1},8,["collapsed"])}}};var Be="/picr/assets/logo.6bb51d52.png";const f=ne.create({timeout:1e3*10,baseURL:"https://api.github.com"});f.interceptors.request.use(e=>{const t=N(),n=localStorage.getItem("GITHUB__TOKEN")||t.config.token;return n&&(e.headers.Authorization=`token ${n}`),e.params=O(g({},e.params),{_t:Date.now()}),e},e=>Promise.error(e));f.interceptors.response.use(e=>e.status>=200&&e.status<300?Promise.resolve(e.data):Promise.reject(e.data),e=>{let t=e.response.data;return se.error(t.message),Promise.reject(t)});const qe=async()=>f({url:"/user"}),ze=e=>f({url:`/users/${e.login}/repos`}),Me=e=>f({url:`/repos/${e.login}/${e.repo}/branches`}),Ne=async e=>f({url:C.join(`/repos/${e.login}/${e.repo}/contents/${e.dir}`),params:e.query}),lt=async e=>f({url:C.join(`/repos/${e.login}/${e.repo}/contents/${e.dirs}/${e.filename}`),method:"PUT",data:{branch:e.branch,message:e.message,content:e.content}}),ut=async e=>f({url:C.join(`/repos/${e.login}/${e.repo}/contents/${e.dirs}/${e.filename}`),data:e.data,method:"DELETE"}),N=oe("user",{state:()=>({config:{id:null,token:"",login:"",name:"",avatarUrl:"",selectedDir:"xxx",selectedDirList:[],selectedRepo:"",dirMode:1,selectedBranch:""},repos:[],branches:[],contents:[],setting:{isHash:!1,isMarkdown:!1,isCompress:!1}}),actions:{async getUser(e){localStorage.setItem("GITHUB__TOKEN",e);try{let t=await qe();this.config.id=t.id,this.config.avatarUrl=t.avatar_url,this.config.login=t.login,this.config.name=t.name,this.config.token=e}catch{}},async logout(){localStorage.clear(),location.reload()},updateConfig(e){this.config=g(g({},this.config),e)},async getRepos(){try{let e=await ze({login:this.config.login});this.repos=e}catch{}},async getBranches(e){try{let t=await Me({login:this.config.login,repo:e});this.branches=t}catch{}},async getBranchCatalogue(e){try{let t=await Ne(g({login:this.config.login},e));return this.contents=t,t}catch{}}},getters:{dirsContents:e=>e.contents.filter(t=>t.type==="dir"),imageContents:e=>e.contents.filter(t=>t.type==="file"&&re.getType(t.name).startsWith("image")).map(t=>(t.isMarkdown=e.setting.isMarkdown,t))},persist:{key:"PICR_CONFIG",paths:["config","setting"],storage:localStorage}}),Ke=y(" \u7D2F\u8BA1\u8BBF\u95EE\u6570: "),He=h("span",{id:"busuanzi_value_site_uv",class:"uv"},null,-1),Ve=y(" \u6D4F\u89C8\u6B21\u6570: "),je=h("span",{id:"busuanzi_value_site_pv",class:"pv"},null,-1),Fe=[Ke,He,Ve,je],Ge={setup(e){const t=k(null),n=k(!1);return ae(()=>{const s=document.createElement("script");s.async=!0,s.src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",t.value.appendChild(s),s.onload=function(){ie(()=>{n.value=!0})}}),(s,o)=>ce((c(),$("div",{class:"site-count",ref_key:"siteCountDom",ref:t},Fe,512)),[[le,n.value]])}};const K=e=>(de("data-v-4dcb15f1"),e=e(),pe(),e),We={class:"header__left"},Je=K(()=>h("img",{src:Be,class:"logo",alt:""},null,-1)),Qe=[Je],Xe=K(()=>h("h2",{class:"logo__txt"},"PicR",-1)),Ye={class:"login__box"},Ze={key:0,class:"no__login--text"},et={key:1,class:"userinfo"},tt=y("\u9000\u51FA\u767B\u5F55"),nt={setup(e){const t=N(),n=B(),{config:s}=ue(t),o=()=>{t.logout()};return(r,a)=>{const _=me,m=he,S=z,E=M,L=fe,p=ge;return c(),u(p,{class:"header"},{default:i(()=>[h("div",We,[h("h1",{onClick:a[0]||(a[0]=D(at=>d(n).push("/"),["stop"]))},Qe),Xe,l(Ge)]),h("div",Ye,[d(s).id?(c(),$("span",et,q(d(s).login),1)):(c(),$("span",Ze,"\u672A\u767B\u5F55")),d(s).id?(c(),u(L,{key:3},{overlay:i(()=>[l(E,null,{default:i(()=>[l(S,null,{default:i(()=>[l(m,{onClick:D(o,["stop"]),type:"link"},{default:i(()=>[tt]),_:1},8,["onClick"])]),_:1})]),_:1})]),default:i(()=>[l(_,{src:d(s).avatarUrl,size:48},null,8,["src"])]),_:1})):(c(),u(_,{key:2,size:48},{icon:i(()=>[l(d(_e))]),_:1}))])]),_:1})}}};var st=b(nt,[["__scopeId","data-v-4dcb15f1"]]);const ot={setup(e){return(t,n)=>{const s=ve;return c(),u(s,{style:{"min-height":"100vh"}},{default:i(()=>[l(st),l(s,null,{default:i(()=>[l(Ae),l(Te)]),_:1})]),_:1})}}},rt=ye({history:ke(),routes:[{path:"/",component:ot,redirect:"/upload",children:[{path:"/setting",name:"setting",component:()=>v(()=>import("./setting.4c6b2069.js"),["assets/setting.4c6b2069.js","assets/setting.b37ea2f2.css","assets/index.ff7b7785.css","assets/index.cd256673.css","assets/index.1a044952.css","assets/vendor.472db396.js","assets/vendor.6ca50818.css","assets/index.16ef71e1.js","assets/index.1ce24a9e.css"]),meta:{title:"\u56FE\u5E8A\u914D\u7F6E",icon:"SettingOutlined"}},{path:"/upload",name:"upload",component:()=>v(()=>import("./upload.08174d77.js"),["assets/upload.08174d77.js","assets/upload.33f9ea42.css","assets/index.ff7b7785.css","assets/index.cd256673.css","assets/index.1a044952.css","assets/vendor.472db396.js","assets/vendor.6ca50818.css","assets/useCopExternalLinks.57ab7dd0.js","assets/useCopExternalLinks.3477452d.css","assets/index.16ef71e1.js","assets/index.1ce24a9e.css"]),meta:{title:"\u56FE\u7247\u4E0A\u4F20",icon:"EditOutlined"}},{path:"/imglist",name:"imglist",component:()=>v(()=>import("./imglist.34b600c3.js"),["assets/imglist.34b600c3.js","assets/imglist.396b9ef6.css","assets/index.ff7b7785.css","assets/index.cd256673.css","assets/vendor.472db396.js","assets/vendor.6ca50818.css","assets/useCopExternalLinks.57ab7dd0.js","assets/useCopExternalLinks.3477452d.css","assets/index.16ef71e1.js","assets/index.1ce24a9e.css"]),meta:{title:"\u56FE\u5E8A\u7BA1\u7406",icon:"SettingOutlined"}},{path:"/config",name:"config",component:()=>v(()=>import("./config.e4fd2d00.js"),["assets/config.e4fd2d00.js","assets/config.4898170b.css","assets/index.ff7b7785.css","assets/vendor.472db396.js","assets/vendor.6ca50818.css"]),meta:{title:"\u6211\u7684\u914D\u7F6E",icon:"SettingOutlined"}},{path:"/course",name:"course",component:()=>v(()=>import("./course.ba4dc14a.js"),["assets/course.ba4dc14a.js","assets/course.a0147496.css","assets/index.ff7b7785.css","assets/index.cd256673.css","assets/index.1a044952.css","assets/vendor.472db396.js","assets/vendor.6ca50818.css"]),meta:{title:"\u4F7F\u7528\u6559\u7A0B",icon:"PushpinFilled"}}]}]});const H=$e();H.use(we);const w=Se(xe);w.use(rt);w.use(H);w.use(Ee);w.mount("#app");export{b as _,ut as a,lt as r,N as u};
