import{G as Nt,H as $t,J as jt,u as He,s as Ue,_ as mt,r as xe,b as Z,i as ye,K as E,e as $,d as M,F as gt,j as wt,g as V,c as _e,h as Y,t as ue,k as Pe,L as Ne,M as $e,N as _t,f as Se,O as Ht,P as zt,Q as Ie,T as dt,U as Wt,V as xt,W as ft,X as qt,Y as Vt,Z as Xt,$ as yt,n as St,I as Ct,a0 as Kt,C as Yt,a1 as Qt,a2 as ht,a3 as Jt,S as Zt,a4 as en,B as tn,v as nn,a5 as rn,a6 as an,a7 as on,a8 as sn,a9 as ln,aa as pt,ab as un}from"./index.c1da32e6.js";/* empty css              *//* empty css              *//* empty css               */import{g as be,M as It,a as bt,b as je,u as Dt,d as cn,c as dn,j as fn,m as hn,e as pn,f as vt,h as vn,i as mn}from"./useCopExternalLinks.1a6ddd01.js";import{a as gn}from"./index.d16996fa.js";var At={exports:{}};(function(G,H){(function(w,v){G.exports=v()})(Nt,function(){return function(T){var w={};function v(C){if(w[C])return w[C].exports;var R=w[C]={exports:{},id:C,loaded:!1};return T[C].call(R.exports,R,R.exports,v),R.loaded=!0,R.exports}return v.m=T,v.c=w,v.p="",v(0)}([function(T,w,v){v(7),v(8),T.exports=v(9)},function(T,w,v){(function(C){(function(R){var I=typeof C=="function"&&C||function(n){setTimeout(n,1)};function d(n,r){return function(){n.apply(r,arguments)}}var D=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"};function S(n){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");if(typeof n!="function")throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],f(n,d(s,this),d(t,this))}function j(n){var r=this;if(this._state===null){this._deferreds.push(n);return}I(function(){var l=r._state?n.onFulfilled:n.onRejected;if(l===null){(r._state?n.resolve:n.reject)(r._value);return}var x;try{x=l(r._value)}catch(m){n.reject(m);return}n.resolve(x)})}function s(n){try{if(n===this)throw new TypeError("A promise cannot be resolved with itself.");if(n&&(typeof n=="object"||typeof n=="function")){var r=n.then;if(typeof r=="function"){f(d(r,n),d(s,this),d(t,this));return}}this._state=!0,this._value=n,i.call(this)}catch(l){t.call(this,l)}}function t(n){this._state=!1,this._value=n,i.call(this)}function i(){for(var n=0,r=this._deferreds.length;n<r;n++)j.call(this,this._deferreds[n]);this._deferreds=null}function h(n,r,l,x){this.onFulfilled=typeof n=="function"?n:null,this.onRejected=typeof r=="function"?r:null,this.resolve=l,this.reject=x}function f(n,r,l){var x=!1;try{n(function(m){x||(x=!0,r(m))},function(m){x||(x=!0,l(m))})}catch(m){if(x)return;x=!0,l(m)}}S.prototype.catch=function(n){return this.then(null,n)},S.prototype.then=function(n,r){var l=this;return new S(function(x,m){j.call(l,new h(n,r,x,m))})},S.all=function(){var n=Array.prototype.slice.call(arguments.length===1&&D(arguments[0])?arguments[0]:arguments);return new S(function(r,l){if(n.length===0)return r([]);var x=n.length;function m(p,g){try{if(g&&(typeof g=="object"||typeof g=="function")){var e=g.then;if(typeof e=="function"){e.call(g,function(a){m(p,a)},l);return}}n[p]=g,--x===0&&r(n)}catch(a){l(a)}}for(var k=0;k<n.length;k++)m(k,n[k])})},S.resolve=function(n){return n&&typeof n=="object"&&n.constructor===S?n:new S(function(r){r(n)})},S.reject=function(n){return new S(function(r,l){l(n)})},S.race=function(n){return new S(function(r,l){for(var x=0,m=n.length;x<m;x++)n[x].then(r,l)})},S._setImmediateFn=function(r){I=r},S.prototype.always=function(n){var r=this.constructor;return this.then(function(l){return r.resolve(n()).then(function(){return l})},function(l){return r.resolve(n()).then(function(){throw l})})},typeof T!="undefined"&&T.exports?T.exports=S:R.Promise||(R.Promise=S)})(this)}).call(w,v(2).setImmediate)},function(T,w,v){(function(C){var R=typeof C!="undefined"&&C||typeof self!="undefined"&&self||window,I=Function.prototype.apply;w.setTimeout=function(){return new d(I.call(setTimeout,R,arguments),clearTimeout)},w.setInterval=function(){return new d(I.call(setInterval,R,arguments),clearInterval)},w.clearTimeout=w.clearInterval=function(D){D&&D.close()};function d(D,S){this._id=D,this._clearFn=S}d.prototype.unref=d.prototype.ref=function(){},d.prototype.close=function(){this._clearFn.call(R,this._id)},w.enroll=function(D,S){clearTimeout(D._idleTimeoutId),D._idleTimeout=S},w.unenroll=function(D){clearTimeout(D._idleTimeoutId),D._idleTimeout=-1},w._unrefActive=w.active=function(D){clearTimeout(D._idleTimeoutId);var S=D._idleTimeout;S>=0&&(D._idleTimeoutId=setTimeout(function(){D._onTimeout&&D._onTimeout()},S))},v(3),w.setImmediate=typeof self!="undefined"&&self.setImmediate||typeof C!="undefined"&&C.setImmediate||this&&this.setImmediate,w.clearImmediate=typeof self!="undefined"&&self.clearImmediate||typeof C!="undefined"&&C.clearImmediate||this&&this.clearImmediate}).call(w,function(){return this}())},function(T,w,v){(function(C,R){(function(I,d){if(I.setImmediate)return;var D=1,S={},j=!1,s=I.document,t;function i(e){typeof e!="function"&&(e=new Function(""+e));for(var a=new Array(arguments.length-1),o=0;o<a.length;o++)a[o]=arguments[o+1];var _={callback:e,args:a};return S[D]=_,t(D),D++}function h(e){delete S[e]}function f(e){var a=e.callback,o=e.args;switch(o.length){case 0:a();break;case 1:a(o[0]);break;case 2:a(o[0],o[1]);break;case 3:a(o[0],o[1],o[2]);break;default:a.apply(d,o);break}}function n(e){if(j)setTimeout(n,0,e);else{var a=S[e];if(a){j=!0;try{f(a)}finally{h(e),j=!1}}}}function r(){t=function(e){R.nextTick(function(){n(e)})}}function l(){if(I.postMessage&&!I.importScripts){var e=!0,a=I.onmessage;return I.onmessage=function(){e=!1},I.postMessage("","*"),I.onmessage=a,e}}function x(){var e="setImmediate$"+Math.random()+"$",a=function(o){o.source===I&&typeof o.data=="string"&&o.data.indexOf(e)===0&&n(+o.data.slice(e.length))};I.addEventListener?I.addEventListener("message",a,!1):I.attachEvent("onmessage",a),t=function(o){I.postMessage(e+o,"*")}}function m(){var e=new MessageChannel;e.port1.onmessage=function(a){var o=a.data;n(o)},t=function(a){e.port2.postMessage(a)}}function k(){var e=s.documentElement;t=function(a){var o=s.createElement("script");o.onreadystatechange=function(){n(a),o.onreadystatechange=null,e.removeChild(o),o=null},e.appendChild(o)}}function p(){t=function(e){setTimeout(n,0,e)}}var g=Object.getPrototypeOf&&Object.getPrototypeOf(I);g=g&&g.setTimeout?g:I,{}.toString.call(I.process)==="[object process]"?r():l()?x():I.MessageChannel?m():s&&"onreadystatechange"in s.createElement("script")?k():p(),g.setImmediate=i,g.clearImmediate=h})(typeof self=="undefined"?typeof C=="undefined"?this:C:self)}).call(w,function(){return this}(),v(4))},function(T,w){var v=T.exports={},C,R;function I(){throw new Error("setTimeout has not been defined")}function d(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?C=setTimeout:C=I}catch{C=I}try{typeof clearTimeout=="function"?R=clearTimeout:R=d}catch{R=d}})();function D(l){if(C===setTimeout)return setTimeout(l,0);if((C===I||!C)&&setTimeout)return C=setTimeout,setTimeout(l,0);try{return C(l,0)}catch{try{return C.call(null,l,0)}catch{return C.call(this,l,0)}}}function S(l){if(R===clearTimeout)return clearTimeout(l);if((R===d||!R)&&clearTimeout)return R=clearTimeout,clearTimeout(l);try{return R(l)}catch{try{return R.call(null,l)}catch{return R.call(this,l)}}}var j=[],s=!1,t,i=-1;function h(){!s||!t||(s=!1,t.length?j=t.concat(j):i=-1,j.length&&f())}function f(){if(!s){var l=D(h);s=!0;for(var x=j.length;x;){for(t=j,j=[];++i<x;)t&&t[i].run();i=-1,x=j.length}t=null,s=!1,S(l)}}v.nextTick=function(l){var x=new Array(arguments.length-1);if(arguments.length>1)for(var m=1;m<arguments.length;m++)x[m-1]=arguments[m];j.push(new n(l,x)),j.length===1&&!s&&D(f)};function n(l,x){this.fun=l,this.array=x}n.prototype.run=function(){this.fun.apply(null,this.array)},v.title="browser",v.browser=!0,v.env={},v.argv=[],v.version="",v.versions={};function r(){}v.on=r,v.addListener=r,v.once=r,v.off=r,v.removeListener=r,v.removeAllListeners=r,v.emit=r,v.prependListener=r,v.prependOnceListener=r,v.listeners=function(l){return[]},v.binding=function(l){throw new Error("process.binding is not supported")},v.cwd=function(){return"/"},v.chdir=function(l){throw new Error("process.chdir is not supported")},v.umask=function(){return 0}},function(T,w){var v=function(){try{return new Blob,!0}catch{return!1}}()?window.Blob:function(I,d){var D=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MSBlobBuilder||window.MozBlobBuilder);return I.forEach(function(S){D.append(S)}),D.getBlob(d?d.type:void 0)};function C(){var I=~navigator.userAgent.indexOf("Android")&&~navigator.vendor.indexOf("Google")&&!~navigator.userAgent.indexOf("Chrome");return I&&navigator.userAgent.match(/AppleWebKit\/(\d+)/).pop()<=534||/MQQBrowser/g.test(navigator.userAgent)}var R=function(){var I=0;function d(){var D=this,S=[],j=Array(21).join("-")+(+new Date*(1e16*Math.random())).toString(36),s=XMLHttpRequest.prototype.send;this.getParts=function(){return S.toString()},this.append=function(t,i,h){S.push("--"+j+`\r
Content-Disposition: form-data; name="`+t+'"'),i instanceof Blob?(S.push('; filename="'+(h||"blob")+`"\r
Content-Type: `+i.type+`\r
\r
`),S.push(i)):S.push(`\r
\r
`+i),S.push(`\r
`)},I++,XMLHttpRequest.prototype.send=function(t){var i,h,f=this;t===D?(S.push("--"+j+`--\r
`),h=new v(S),i=new FileReader,i.onload=function(){s.call(f,i.result)},i.onerror=function(n){throw n},i.readAsArrayBuffer(h),this.setRequestHeader("Content-Type","multipart/form-data; boundary="+j),I--,I==0&&(XMLHttpRequest.prototype.send=s)):s.call(this,t)}}return d.prototype=Object.create(FormData.prototype),d}();T.exports={Blob:v,FormData:C()?R:FormData}},function(T,w,v){var C,R;(function(){var I=!1,d=function(e){if(e instanceof d)return e;if(!(this instanceof d))return new d(e);this.EXIFwrapped=e};typeof T!="undefined"&&T.exports&&(w=T.exports=d),w.EXIF=d;var D=d.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},S=d.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},j=d.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},s=d.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function t(e){return!!e.exifdata}function i(e,a){a=a||e.match(/^data\:([^\;]+)\;base64,/mi)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gmi,"");for(var o=atob(e),_=o.length,u=new ArrayBuffer(_),A=new Uint8Array(u),y=0;y<_;y++)A[y]=o.charCodeAt(y);return u}function h(e,a){var o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType="blob",o.onload=function(_){(this.status==200||this.status===0)&&a(this.response)},o.send()}function f(e,a){function o(y){var F=n(y),q=r(y);e.exifdata=F||{},e.iptcdata=q||{},a&&a.call(e)}if(e.src)if(/^data\:/i.test(e.src)){var _=i(e.src);o(_)}else if(/^blob\:/i.test(e.src)){var u=new FileReader;u.onload=function(y){o(y.target.result)},h(e.src,function(y){u.readAsArrayBuffer(y)})}else{var A=new XMLHttpRequest;A.onload=function(){this.status==200||this.status===0?o(A.response):a(new Error("Could not load image")),A=null},A.open("GET",e.src,!0),A.responseType="arraybuffer",A.send(null)}else if(window.FileReader&&(e instanceof window.Blob||e instanceof window.File)){var u=new FileReader;u.onload=function(F){o(F.target.result)},u.readAsArrayBuffer(e)}}function n(e){var a=new DataView(e);if(a.getUint8(0)!=255||a.getUint8(1)!=216)return!1;for(var o=2,_=e.byteLength,u;o<_;){if(a.getUint8(o)!=255)return!1;if(u=a.getUint8(o+1),u==225)return g(a,o+4,a.getUint16(o+2)-2);o+=2+a.getUint16(o+2)}}function r(e){var a=new DataView(e);if(a.getUint8(0)!=255||a.getUint8(1)!=216)return!1;for(var o=2,_=e.byteLength,u=function(q,U){return q.getUint8(U)===56&&q.getUint8(U+1)===66&&q.getUint8(U+2)===73&&q.getUint8(U+3)===77&&q.getUint8(U+4)===4&&q.getUint8(U+5)===4};o<_;){if(u(a,o)){var A=a.getUint8(o+7);A%2!==0&&(A+=1),A===0&&(A=4);var y=o+8+A,F=a.getUint16(o+6+A);return x(e,y,F)}o++}}var l={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function x(e,a,o){for(var _=new DataView(e),u={},A,y,F,q,U=a;U<a+o;)_.getUint8(U)===28&&_.getUint8(U+1)===2&&(q=_.getUint8(U+2),q in l&&(F=_.getInt16(U+3),y=l[q],A=p(_,U+5,F),u.hasOwnProperty(y)?u[y]instanceof Array?u[y].push(A):u[y]=[u[y],A]:u[y]=A)),U++;return u}function m(e,a,o,_,u){var A=e.getUint16(o,!u),y={},F,q,U;for(U=0;U<A;U++)F=o+U*12+2,q=_[e.getUint16(F,!u)],!q&&I&&console.log("Unknown tag: "+e.getUint16(F,!u)),y[q]=k(e,F,a,o,u);return y}function k(e,a,o,_,u){var A=e.getUint16(a+2,!u),y=e.getUint32(a+4,!u),F=e.getUint32(a+8,!u)+o,q,U,pe,L,z,ee;switch(A){case 1:case 7:if(y==1)return e.getUint8(a+8,!u);for(q=y>4?F:a+8,U=[],L=0;L<y;L++)U[L]=e.getUint8(q+L);return U;case 2:return q=y>4?F:a+8,p(e,q,y-1);case 3:if(y==1)return e.getUint16(a+8,!u);for(q=y>2?F:a+8,U=[],L=0;L<y;L++)U[L]=e.getUint16(q+2*L,!u);return U;case 4:if(y==1)return e.getUint32(a+8,!u);for(U=[],L=0;L<y;L++)U[L]=e.getUint32(F+4*L,!u);return U;case 5:if(y==1)return z=e.getUint32(F,!u),ee=e.getUint32(F+4,!u),pe=new Number(z/ee),pe.numerator=z,pe.denominator=ee,pe;for(U=[],L=0;L<y;L++)z=e.getUint32(F+8*L,!u),ee=e.getUint32(F+4+8*L,!u),U[L]=new Number(z/ee),U[L].numerator=z,U[L].denominator=ee;return U;case 9:if(y==1)return e.getInt32(a+8,!u);for(U=[],L=0;L<y;L++)U[L]=e.getInt32(F+4*L,!u);return U;case 10:if(y==1)return e.getInt32(F,!u)/e.getInt32(F+4,!u);for(U=[],L=0;L<y;L++)U[L]=e.getInt32(F+8*L,!u)/e.getInt32(F+4+8*L,!u);return U}}function p(e,a,o){var _="",u;for(u=a;u<a+o;u++)_+=String.fromCharCode(e.getUint8(u));return _}function g(e,a){if(p(e,a,4)!="Exif")return!1;var o,_,u,A,y,F=a+6;if(e.getUint16(F)==18761)o=!1;else if(e.getUint16(F)==19789)o=!0;else return!1;if(e.getUint16(F+2,!o)!=42)return!1;var q=e.getUint32(F+4,!o);if(q<8)return!1;if(_=m(e,F,F+q,S,o),_.ExifIFDPointer){A=m(e,F,F+_.ExifIFDPointer,D,o);for(u in A){switch(u){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":A[u]=s[u][A[u]];break;case"ExifVersion":case"FlashpixVersion":A[u]=String.fromCharCode(A[u][0],A[u][1],A[u][2],A[u][3]);break;case"ComponentsConfiguration":A[u]=s.Components[A[u][0]]+s.Components[A[u][1]]+s.Components[A[u][2]]+s.Components[A[u][3]];break}_[u]=A[u]}}if(_.GPSInfoIFDPointer){y=m(e,F,F+_.GPSInfoIFDPointer,j,o);for(u in y){switch(u){case"GPSVersionID":y[u]=y[u][0]+"."+y[u][1]+"."+y[u][2]+"."+y[u][3];break}_[u]=y[u]}}return _}d.getData=function(e,a){return(e instanceof Image||e instanceof HTMLImageElement)&&!e.complete?!1:(t(e)?a&&a.call(e):f(e,a),!0)},d.getTag=function(e,a){if(!!t(e))return e.exifdata[a]},d.getAllTags=function(e){if(!t(e))return{};var a,o=e.exifdata,_={};for(a in o)o.hasOwnProperty(a)&&(_[a]=o[a]);return _},d.pretty=function(e){if(!t(e))return"";var a,o=e.exifdata,_="";for(a in o)o.hasOwnProperty(a)&&(typeof o[a]=="object"?o[a]instanceof Number?_+=a+" : "+o[a]+" ["+o[a].numerator+"/"+o[a].denominator+`]\r
`:_+=a+" : ["+o[a].length+` values]\r
`:_+=a+" : "+o[a]+`\r
`);return _},d.readFromBinaryFile=function(e){return n(e)},C=[],R=function(){return d}.apply(w,C),R!==void 0&&(T.exports=R)}).call(this)},function(T,w,v){var C,R;(function(){function I(t){var i=t.naturalWidth,h=t.naturalHeight;if(i*h>1024*1024){var f=document.createElement("canvas");f.width=f.height=1;var n=f.getContext("2d");return n.drawImage(t,-i+1,0),n.getImageData(0,0,1,1).data[3]===0}else return!1}function d(t,i,h){var f=document.createElement("canvas");f.width=1,f.height=h;var n=f.getContext("2d");n.drawImage(t,0,0);for(var r=n.getImageData(0,0,1,h).data,l=0,x=h,m=h;m>l;){var k=r[(m-1)*4+3];k===0?x=m:l=m,m=x+l>>1}var p=m/h;return p===0?1:p}function D(t,i,h){var f=document.createElement("canvas");return S(t,f,i,h),f.toDataURL("image/jpeg",i.quality||.8)}function S(t,i,h,f){var n=t.naturalWidth,r=t.naturalHeight,l=h.width,x=h.height,m=i.getContext("2d");m.save(),j(i,m,l,x,h.orientation);var k=I(t);k&&(n/=2,r/=2);var p=1024,g=document.createElement("canvas");g.width=g.height=p;for(var e=g.getContext("2d"),a=f?d(t,n,r):1,o=Math.ceil(p*l/n),_=Math.ceil(p*x/r/a),u=0,A=0;u<r;){for(var y=0,F=0;y<n;)e.clearRect(0,0,p,p),e.drawImage(t,-y,-u),m.drawImage(g,0,0,p,p,F,A,o,_),y+=p,F+=o;u+=p,A+=_}m.restore(),g=e=null}function j(t,i,h,f,n){switch(n){case 5:case 6:case 7:case 8:t.width=f,t.height=h;break;default:t.width=h,t.height=f}switch(n){case 2:i.translate(h,0),i.scale(-1,1);break;case 3:i.translate(h,f),i.rotate(Math.PI);break;case 4:i.translate(0,f),i.scale(1,-1);break;case 5:i.rotate(.5*Math.PI),i.scale(1,-1);break;case 6:i.rotate(.5*Math.PI),i.translate(0,-f);break;case 7:i.rotate(.5*Math.PI),i.translate(h,-f),i.scale(-1,1);break;case 8:i.rotate(-.5*Math.PI),i.translate(-h,0);break}}function s(t){if(window.Blob&&t instanceof Blob){var i=new Image,h=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;if(!h)throw Error("No createObjectURL function found to create blob url");i.src=h.createObjectURL(t),this.blob=t,t=i}if(!t.naturalWidth&&!t.naturalHeight){var f=this;t.onload=function(){var n=f.imageLoadListeners;if(n){f.imageLoadListeners=null;for(var r=0,l=n.length;r<l;r++)n[r]()}},this.imageLoadListeners=[]}this.srcImage=t}s.prototype.render=function(t,i,h){if(this.imageLoadListeners){var f=this;this.imageLoadListeners.push(function(){f.render(t,i,h)});return}i=i||{};var n=this.srcImage,r=n.src,l=r.length,x=n.naturalWidth,m=n.naturalHeight,k=i.width,p=i.height,g=i.maxWidth,e=i.maxHeight,a=this.blob&&this.blob.type==="image/jpeg"||r.indexOf("data:image/jpeg")===0||r.indexOf(".jpg")===l-4||r.indexOf(".jpeg")===l-5;k&&!p?p=m*k/x<<0:p&&!k?k=x*p/m<<0:(k=x,p=m),g&&k>g&&(k=g,p=m*k/x<<0),e&&p>e&&(p=e,k=x*p/m<<0);var o={width:k,height:p};for(var _ in i)o[_]=i[_];var u=t.tagName.toLowerCase();u==="img"?t.src=D(this.srcImage,o,a):u==="canvas"&&S(this.srcImage,t,o,a),typeof this.onrender=="function"&&this.onrender(t),h&&h()},C=[],R=function(){return s}.apply(w,C),R!==void 0&&(T.exports=R)})()},function(T,w){function v(C){var R=Math.floor,I=new Array(64),d=new Array(64),D=new Array(64),S=new Array(64),j,s,t,i,h=new Array(65535),f=new Array(65535),n=new Array(64),r=new Array(64),l=[],x=0,m=7,k=new Array(64),p=new Array(64),g=new Array(64),e=new Array(256),a=new Array(2048),o,_=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],u=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],A=[0,1,2,3,4,5,6,7,8,9,10,11],y=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],F=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],q=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],U=[0,1,2,3,4,5,6,7,8,9,10,11],pe=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],L=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function z(c){for(var B=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],O=0;O<64;O++){var N=R((B[O]*c+50)/100);N<1?N=1:N>255&&(N=255),I[_[O]]=N}for(var W=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],X=0;X<64;X++){var Q=R((W[X]*c+50)/100);Q<1?Q=1:Q>255&&(Q=255),d[_[X]]=Q}for(var K=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],oe=0,te=0;te<8;te++)for(var P=0;P<8;P++)D[oe]=1/(I[_[oe]]*K[te]*K[P]*8),S[oe]=1/(d[_[oe]]*K[te]*K[P]*8),oe++}function ee(c,B){for(var O=0,N=0,W=new Array,X=1;X<=16;X++){for(var Q=1;Q<=c[X];Q++)W[B[N]]=[],W[B[N]][0]=O,W[B[N]][1]=X,N++,O++;O*=2}return W}function ie(){j=ee(u,A),s=ee(q,U),t=ee(y,F),i=ee(pe,L)}function Rt(){for(var c=1,B=2,O=1;O<=15;O++){for(var N=c;N<B;N++)f[32767+N]=O,h[32767+N]=[],h[32767+N][1]=O,h[32767+N][0]=N;for(var W=-(B-1);W<=-c;W++)f[32767+W]=O,h[32767+W]=[],h[32767+W][1]=O,h[32767+W][0]=B-1+W;c<<=1,B<<=1}}function Ft(){for(var c=0;c<256;c++)a[c]=19595*c,a[c+256>>0]=38470*c,a[c+512>>0]=7471*c+32768,a[c+768>>0]=-11059*c,a[c+1024>>0]=-21709*c,a[c+1280>>0]=32768*c+8421375,a[c+1536>>0]=-27439*c,a[c+1792>>0]=-5329*c}function ve(c){for(var B=c[0],O=c[1]-1;O>=0;)B&1<<O&&(x|=1<<m),O--,m--,m<0&&(x==255?(b(255),b(0)):b(x),m=7,x=0)}function b(c){l.push(e[c])}function ae(c){b(c>>8&255),b(c&255)}function Ut(c,B){var O,N,W,X,Q,K,oe,te,P=0,J;const ce=8,me=64;for(J=0;J<ce;++J){O=c[P],N=c[P+1],W=c[P+2],X=c[P+3],Q=c[P+4],K=c[P+5],oe=c[P+6],te=c[P+7];var se=O+te,ne=O-te,ge=N+oe,de=N-oe,le=W+K,fe=W-K,he=X+Q,Re=X-Q,Ce=se+he,De=se-he,we=ge+le,Ae=ge-le;c[P]=Ce+we,c[P+4]=Ce-we;var We=(Ae+De)*.707106781;c[P+2]=De+We,c[P+6]=De-We,Ce=Re+fe,we=fe+de,Ae=de+ne;var qe=(Ce-Ae)*.382683433,Ve=.5411961*Ce+qe,Xe=1.306562965*Ae+qe,Ke=we*.707106781,Ye=ne+Ke,Qe=ne-Ke;c[P+5]=Qe+Ve,c[P+3]=Qe-Ve,c[P+1]=Ye+Xe,c[P+7]=Ye-Xe,P+=8}for(P=0,J=0;J<ce;++J){O=c[P],N=c[P+8],W=c[P+16],X=c[P+24],Q=c[P+32],K=c[P+40],oe=c[P+48],te=c[P+56];var Je=O+te,Ee=O-te,Ze=N+oe,et=N-oe,tt=W+K,nt=W-K,rt=X+Q,Gt=X-Q,Fe=Je+rt,Oe=Je-rt,Te=Ze+tt,ke=Ze-tt;c[P]=Fe+Te,c[P+32]=Fe-Te;var at=(ke+Oe)*.707106781;c[P+16]=Oe+at,c[P+48]=Oe-at,Fe=Gt+nt,Te=nt+et,ke=et+Ee;var ot=(Fe-ke)*.382683433,it=.5411961*Fe+ot,st=1.306562965*ke+ot,lt=Te*.707106781,ut=Ee+lt,ct=Ee-lt;c[P+40]=ct+it,c[P+24]=ct-it,c[P+8]=ut+st,c[P+56]=ut-st,P++}var Le;for(J=0;J<me;++J)Le=c[J]*B[J],n[J]=Le>0?Le+.5|0:Le-.5|0;return n}function Tt(){ae(65504),ae(16),b(74),b(70),b(73),b(70),b(0),b(1),b(1),b(0),ae(1),ae(1),b(0),b(0)}function kt(c,B){ae(65472),ae(17),b(8),ae(B),ae(c),b(3),b(1),b(17),b(0),b(2),b(17),b(1),b(3),b(17),b(1)}function Lt(){ae(65499),ae(132),b(0);for(var c=0;c<64;c++)b(I[c]);b(1);for(var B=0;B<64;B++)b(d[B])}function Mt(){ae(65476),ae(418),b(0);for(var c=0;c<16;c++)b(u[c+1]);for(var B=0;B<=11;B++)b(A[B]);b(16);for(var O=0;O<16;O++)b(y[O+1]);for(var N=0;N<=161;N++)b(F[N]);b(1);for(var W=0;W<16;W++)b(q[W+1]);for(var X=0;X<=11;X++)b(U[X]);b(17);for(var Q=0;Q<16;Q++)b(pe[Q+1]);for(var K=0;K<=161;K++)b(L[K])}function Bt(){ae(65498),ae(12),b(3),b(1),b(0),b(2),b(17),b(3),b(17),b(0),b(63),b(0)}function Be(c,B,O,N,W){var X=W[0],Q=W[240],K;const oe=16,te=63,P=64;for(var J=Ut(c,B),ce=0;ce<P;++ce)r[_[ce]]=J[ce];var me=r[0]-O;O=r[0],me==0?ve(N[0]):(K=32767+me,ve(N[f[K]]),ve(h[K]));for(var se=63;se>0&&r[se]==0;se--);if(se==0)return ve(X),O;for(var ne=1,ge;ne<=se;){for(var de=ne;r[ne]==0&&ne<=se;++ne);var le=ne-de;if(le>=oe){ge=le>>4;for(var fe=1;fe<=ge;++fe)ve(Q);le=le&15}K=32767+r[ne],ve(W[(le<<4)+f[K]]),ve(h[K]),ne++}return se!=te&&ve(X),O}function Et(){for(var c=String.fromCharCode,B=0;B<256;B++)e[B]=c(B)}this.encode=function(c,B,O){var N=new Date().getTime();B&&ze(B),l=new Array,x=0,m=7,ae(65496),Tt(),Lt(),kt(c.width,c.height),Mt(),Bt();var W=0,X=0,Q=0;x=0,m=7,this.encode.displayName="_encode_";for(var K=c.data,oe=c.width,te=c.height,P=oe*4,J,ce=0,me,se,ne,ge,de,le,fe,he;ce<te;){for(J=0;J<P;){for(ge=P*ce+J,de=ge,le=-1,fe=0,he=0;he<64;he++)fe=he>>3,le=(he&7)*4,de=ge+fe*P+le,ce+fe>=te&&(de-=P*(ce+1+fe-te)),J+le>=P&&(de-=J+le-P+4),me=K[de++],se=K[de++],ne=K[de++],k[he]=(a[me]+a[se+256>>0]+a[ne+512>>0]>>16)-128,p[he]=(a[me+768>>0]+a[se+1024>>0]+a[ne+1280>>0]>>16)-128,g[he]=(a[me+1280>>0]+a[se+1536>>0]+a[ne+1792>>0]>>16)-128;W=Be(k,D,W,j,t),X=Be(p,S,X,s,i),Q=Be(g,S,Q,s,i),J+=32}ce+=8}if(m>=0){var Re=[];Re[1]=m+1,Re[0]=(1<<m+1)-1,ve(Re)}if(ae(65497),O){for(var Ce=l.length,De=new Uint8Array(Ce),we=0;we<Ce;we++)De[we]=l[we].charCodeAt();return l=[],new Date().getTime()-N,De}var Ae="data:image/jpeg;base64,"+btoa(l.join(""));return l=[],new Date().getTime()-N,Ae};function ze(c){if(c<=0&&(c=1),c>100&&(c=100),o!=c){var B=0;c<50?B=Math.floor(5e3/c):B=Math.floor(200-c*2),z(B),o=c}}function Ot(){var c=new Date().getTime();C||(C=50),Et(),ie(),Rt(),Ft(),ze(C),new Date().getTime()-c}Ot()}T.exports=v},function(T,w,v){v.p=S("lrz")+"/",window.URL=window.URL||window.webkitURL;var C=v(1),R=v(5),I=v(6),d=function(s){var t=/OS (.*) like Mac OS X/g.exec(s),i=/Android (\d.*?);/g.exec(s)||/Android\/(\d.*?) /g.exec(s),h=t?+t.pop().replace(/-/g,"."):0;return{oldIOS:t?h<8:!1,newIOS:t?h>=13:!1,oldAndroid:i?+i.pop().substr(0,3)<4.5:!1,iOS:/\(i[^;]+;( U;)? CPU.+Mac OS X/.test(s),android:/Android/g.test(s),mQQBrowser:/MQQBrowser/g.test(s)}}(navigator.userAgent);function D(s,t){var i=this;if(!s)throw new Error("\u6CA1\u6709\u6536\u5230\u56FE\u7247\uFF0C\u53EF\u80FD\u7684\u89E3\u51B3\u65B9\u6848\uFF1Ahttps://github.com/think2011/localResizeIMG/issues/7");t=t||{},i.defaults={width:null,height:null,fieldName:"file",ingnoreOrientation:d.iOS?d.newIOS:!0,quality:.7},i.file=s;for(var h in t)!t.hasOwnProperty(h)||(i.defaults[h]=t[h]);return this.init()}D.prototype.init=function(){var s=this,t=s.file,i=typeof t=="string",h=/^data:/.test(t),f=new Image,n=document.createElement("canvas"),r=i?t:URL.createObjectURL(t);if(s.img=f,s.blob=r,s.canvas=n,i?s.fileName=h?"base64.jpg":t.split("/").pop():s.fileName=t.name,!document.createElement("canvas").getContext)throw new Error("\u6D4F\u89C8\u5668\u4E0D\u652F\u6301canvas");return new C(function(l,x){f.onerror=function(){var m=new Error("\u52A0\u8F7D\u56FE\u7247\u6587\u4EF6\u5931\u8D25");throw x(m),m},f.onload=function(){s._getBase64().then(function(m){if(m.length<10){var k=new Error("\u751F\u6210base64\u5931\u8D25");throw x(k),k}return m}).then(function(m){var k=null;typeof s.file=="object"&&m.length>s.file.size?(k=new FormData,t=s.file):(k=new R.FormData,t=j(m)),k.append(s.defaults.fieldName,t,s.fileName.replace(/\..+/g,".jpg")),l({formData:k,fileLen:+t.size,base64:m,base64Len:m.length,origin:s.file,file:t});for(var p in s)!s.hasOwnProperty(p)||(s[p]=null);URL.revokeObjectURL(s.blob)})},!h&&(f.crossOrigin="*"),f.src=r})},D.prototype._getBase64=function(){var s=this,t=s.img,i=s.file,h=s.canvas;return new C(function(f){try{I.getData(typeof i=="object"?i:t,function(){s.orientation=s.defaults.ingnoreOrientation?0:I.getTag(this,"Orientation"),s.resize=s._getResize(),s.ctx=h.getContext("2d"),h.width=s.resize.width,h.height=s.resize.height,s.ctx.fillStyle="#fff",s.ctx.fillRect(0,0,h.width,h.height),d.oldIOS?s._createBase64ForOldIOS().then(f):s._createBase64().then(f)})}catch(n){throw new Error(n)}})},D.prototype._createBase64ForOldIOS=function(){var s=this,t=s.img,i=s.canvas,h=s.defaults,f=s.orientation;return new C(function(n){(function(){var r=[v(7)];(function(l){var x=new l(t);"5678".indexOf(f)>-1?x.render(i,{width:i.height,height:i.width,orientation:f}):x.render(i,{width:i.width,height:i.height,orientation:f}),n(i.toDataURL("image/jpeg",h.quality))}).apply(null,r)})()})},D.prototype._createBase64=function(){var s=this,t=s.resize,i=s.img,h=s.canvas,f=s.ctx,n=s.defaults,r=s.orientation;switch(r){case 3:f.rotate(180*Math.PI/180),f.drawImage(i,-t.width,-t.height,t.width,t.height);break;case 6:f.rotate(90*Math.PI/180),f.drawImage(i,0,-t.width,t.height,t.width);break;case 8:f.rotate(270*Math.PI/180),f.drawImage(i,-t.height,0,t.height,t.width);break;case 2:f.translate(t.width,0),f.scale(-1,1),f.drawImage(i,0,0,t.width,t.height);break;case 4:f.translate(t.width,0),f.scale(-1,1),f.rotate(180*Math.PI/180),f.drawImage(i,-t.width,-t.height,t.width,t.height);break;case 5:f.translate(t.width,0),f.scale(-1,1),f.rotate(90*Math.PI/180),f.drawImage(i,0,-t.width,t.height,t.width);break;case 7:f.translate(t.width,0),f.scale(-1,1),f.rotate(270*Math.PI/180),f.drawImage(i,-t.height,0,t.height,t.width);break;default:f.drawImage(i,0,0,t.width,t.height)}return new C(function(l){d.oldAndroid||d.mQQBrowser||!navigator.userAgent?function(){var x=[v(8)];(function(m){var k=new m,p=f.getImageData(0,0,h.width,h.height);l(k.encode(p,n.quality*100))}).apply(null,x)}():l(h.toDataURL("image/jpeg",n.quality))})},D.prototype._getResize=function(){var s=this,t=s.img,i=s.defaults,h=i.width,f=i.height,n=s.orientation,r={width:t.width,height:t.height};if("5678".indexOf(n)>-1&&(r.width=t.height,r.height=t.width),r.width<h||r.height<f)return r;var l=r.width/r.height;for(h&&f?l>=h/f?r.width>h&&(r.width=h,r.height=Math.ceil(h/l)):r.height>f&&(r.height=f,r.width=Math.ceil(f*l)):h?h<r.width&&(r.width=h,r.height=Math.ceil(h/l)):f&&f<r.height&&(r.width=Math.ceil(f*l),r.height=f);r.width>=3264||r.height>=2448;)r.width*=.8,r.height*=.8;return r};function S(s){var t=null;return s?t=[].filter.call(document.scripts,function(i){return i.src.indexOf(s)!==-1})[0]:t=document.scripts[document.scripts.length-1],t?t.src.substr(0,t.src.lastIndexOf("/")):null}function j(s){var t;s.split(",")[0].indexOf("base64")>=0?t=atob(s.split(",")[1]):t=unescape(s.split(",")[1]);for(var i=s.split(",")[0].split(":")[1].split(";")[0],h=new Uint8Array(t.length),f=0;f<t.length;f++)h[f]=t.charCodeAt(f);return new R.Blob([h.buffer],{type:i})}window.lrz=function(s,t){return new D(s,t)},window.lrz.version="__packageJSON.version__",T.exports=window.lrz}])})})(At);var wn=At.exports,Me,_n=new Uint8Array(16);function xn(){if(!Me&&(Me=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Me))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Me(_n)}var yn=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Sn(G){return typeof G=="string"&&yn.test(G)}var re=[];for(var Ge=0;Ge<256;++Ge)re.push((Ge+256).toString(16).substr(1));function Cn(G){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,T=(re[G[H+0]]+re[G[H+1]]+re[G[H+2]]+re[G[H+3]]+"-"+re[G[H+4]]+re[G[H+5]]+"-"+re[G[H+6]]+re[G[H+7]]+"-"+re[G[H+8]]+re[G[H+9]]+"-"+re[G[H+10]]+re[G[H+11]]+re[G[H+12]]+re[G[H+13]]+re[G[H+14]]+re[G[H+15]]).toLowerCase();if(!Sn(T))throw TypeError("Stringified UUID is invalid");return T}function In(G,H,T){G=G||{};var w=G.random||(G.rng||xn)();if(w[6]=w[6]&15|64,w[8]=w[8]&63|128,H){T=T||0;for(var v=0;v<16;++v)H[T+v]=w[v];return H}return Cn(w)}const Pt=$t("imgBed",{state:()=>({uploadImgList:[]}),actions:{setUploadImgList(G){this.uploadImgList.push(G)},updateImgList(G,H){this.updateImgList[H]=G},async deleteImage(G,H){const T=await jt(G);console.log("\u{1F680} ~ deleteImage ~ res:",T);const[w]=this.uploadImgList.splice(H,1);return w}},getters:{imgList:G=>{const H=He(),{setting:T}=Ue(H);return G.uploadImgList.map(w=>(w.isMarkdown=T.value.isMarkdown,w))}},persist:{key:"PICR_IMGLIST",paths:["uploadImgList"],storage:localStorage}});const bn={class:"upload-page-container"},Dn={class:"imgList"},An={key:0,class:"filename"},Pn={class:"rename__input"},Rn={class:"copy-external-link-box"},Fn={class:"markdown__icon-box"},Un={class:"copy__btn--box"},Tn=["onClick"],kn=["onClick"],Ln={__name:"index",setup(G){const H=Pt(),T=He(),{config:w}=Ue(T),v=xe(-1),C=xe([]),R=xe(!1),I=xe([]),{imgList:d}=Ue(H),D=n=>{d.value[n].isMarkdown=!d.value[n].isMarkdown},S=(n="github",r)=>{Dt(n,d.value[r])},j=async({key:n})=>{let[r,l]=n.split("-");switch(r){case"delete":const x=await H.deleteImage({login:w.value.login,repo:w.value.selectedRepo,path:d.value[l].path,filename:d.value[l].name,data:{message:`delete picture via PicR(${location.origin+location.pathname})`,owner:w.value.login,path:d.value[l].path,repo:w.value.selectedRepo,sha:d.value[l].sha}},l);Ie.success({content:`${be(x)}\u6587\u4EF6\u5220\u9664\u6210\u529F`});break;case"rename":v.value=Number(l),zt(()=>{C.value[Number(l)].focus()});break;case"attribute":R.value=!0;break}},s=n=>I.value[n],t=(n,r)=>{I.value[n]=r},i=n=>{const r=d.value[n];cn(r.jsdelivrUrl,r.filePrefixName+r.fileSubfixName),console.log("\u{1F680} ~ file: index.vue:183 ~ handleDownLoadImg ~ imgData:",r)},h=n=>{let r=be(d.value[n],!0);dt.confirm({title:"\u91CD\u547D\u540D\u63D0\u793A",icon:$(Wt),content:`\u786E\u8BA4\u91CD\u547D\u540D\u4E3A${r}?`,okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",confirmLoading:!0,onOk:async()=>{try{let l=await xt({login:w.value.login,repo:w.value.selectedRepo,branch:w.value.selectedBranch,dirs:w.value.dirMode===4?w.value.selectedDirList.join("/"):w.value.selectedDir,filename:r,message:`\u66F4\u65B0\u4E86${r}\u6587\u4EF6\uFF0C\u6765\u6E90\u4E8E${location.origin+location.pathname}`,content:d.value[n].compressFile.base64.split(",")[1],sha:d.value[n].sha});Ie.success({content:`\u66F4\u65B0${r}\u6210\u529F`}),d.value[n].sha=l.content.sha,d.value[n].filePrefixName=d.value[n].rename,d.value[n].githubUrl=ft.join(dn,`/${w.value.login}/${w.value.selectedRepo}/${w.value.selectedBranch}/${w.value.dirMode===4?w.value.selectedDirList.join("/"):w.value.selectedDir}/${r}`),d.value[n].jsdelivrUrl=ft.join(fn,`/${w.value.login}/${w.value.selectedRepo}@${w.value.selectedBranch}/${w.value.dirMode===4?w.value.selectedDirList.join("/"):w.value.selectedDir}/${r}`),H.updateImgList(d.value[n],n)}catch(l){Ie.error({content:l.message})}finally{v.value=-1}},onCancel:()=>{v.value=-1}})},f=n=>{C.value.push(n)};return(n,r)=>{const l=qt,x=Vt,m=Xt,k=yt,p=St,g=Ct,e=dt,a=Kt;return Z(),ye("div",bn,[E("ul",Dn,[$(a,null,{default:M(()=>[(Z(!0),ye(gt,null,wt(V(d),(o,_)=>(Z(),ye("li",{class:"imgItem",key:o.id},[E("div",{class:"more",ref_for:!0,ref:t.bind(null,_)},[$(m,{getPopupContainer:s.bind(null,_),trigger:"click",class:"more__btn",onClick:n.handleButtonClick},{overlay:M(()=>[$(x,{onClick:j},{default:M(()=>[(Z(),_e(l,{key:`delete-${_}`},{default:M(()=>r[1]||(r[1]=[Y(" \u5220\u9664 ")])),_:2},1024)),(Z(),_e(l,{key:`rename-${_}`},{default:M(()=>r[2]||(r[2]=[Y(" \u91CD\u547D\u540D ")])),_:2},1024)),(Z(),_e(l,{key:`attribute-${_}`},{default:M(()=>r[3]||(r[3]=[Y(" \u5C5E\u6027 ")])),_:2},1024))]),_:2},1024)]),_:2},1032,["getPopupContainer","onClick"])],512),$(k,{class:"img",src:o.compressFile.base64},null,8,["src"]),v.value!==_?(Z(),ye("div",An,[$(p,null,{title:M(()=>[Y(ue(V(be)(o)),1)]),default:M(()=>[Y(" "+ue(V(be)(o)),1)]),_:2},1024)])):Pe("",!0),Ne(E("div",Pn,[$(g,{ref_for:!0,ref:f,onBlur:u=>h(_),value:o.rename,"onUpdate:value":u=>o.rename=u,placeholder:"\u8BF7\u8F93\u5165\u65B0\u7684\u540D\u5B57"},null,8,["onBlur","value","onUpdate:value"])],512),[[$e,v.value===_]]),E("div",Rn,[E("div",Fn,[$(p,null,{title:M(()=>r[4]||(r[4]=[Y(" \u70B9\u51FB\u8F6C\u6362markdown\u683C\u5F0F\u5916\u94FE ")])),default:M(()=>[$(V(_t),{onClick:Se(u=>D(_),["stop"]),class:"markdown__icon",component:o.isMarkdown?V(bt):V(It)},null,8,["onClick","component"])]),_:2},1024)]),E("div",Un,[$(p,null,{title:M(()=>r[5]||(r[5]=[Y(" \u70B9\u51FB\u4E0B\u8F7D ")])),default:M(()=>[$(V(Ht),{onClick:Se(u=>i(_),["stop"]),style:{fontSize:"14px"},class:"copy__btn"},null,8,["onClick"])]),_:2},1024),$(p,null,{title:M(()=>r[6]||(r[6]=[Y(" \u70B9\u51FB\u590D\u5236GitHub\u5916\u94FE ")])),default:M(()=>[E("span",{onClick:Se(u=>S("github",_),["stop"]),class:"copy__btn"},"GitHub",8,Tn)]),_:2},1024),$(p,null,{title:M(()=>r[7]||(r[7]=[Y(" \u70B9\u51FB\u590D\u5236CDN\u5916\u94FE ")])),default:M(()=>[E("span",{onClick:Se(u=>S("cdn",_),["stop"]),class:"copy__btn"},"CDN",8,kn)]),_:2},1024)])]),$(e,{centered:"",footer:null,visible:R.value,"onUpdate:visible":r[0]||(r[0]=u=>R.value=u),title:"\u56FE\u7247\u5C5E\u6027"},{default:M(()=>[E("div",null,[r[8]||(r[8]=Y(" \u56FE\u7247\u540D\u79F0\uFF1A")),E("strong",null,ue(V(be)(V(d)[_])),1)]),E("div",null,[r[9]||(r[9]=Y(" \u56FE\u7247\u5927\u5C0F\uFF1A")),E("strong",null,ue(V(je)(V(d)[_].compressFile.fileLen))+" KB",1)])]),_:2},1032,["visible"])]))),128))]),_:1})])])}}};var Mn=mt(Ln,[["__scopeId","data-v-4e97a3e8"]]);const Bn={class:"ant-upload-drag-icon"},En={class:"repo__container"},On={key:0},Gn={key:1,class:"upload__count"},Nn={key:0,class:"upload__list"},$n={class:"list__wrap"},jn={class:"right__info"},Hn={class:"top"},zn={class:"filename"},Wn={class:"img__info"},qn={class:"bottom"},Vn={class:"rename-box"},Xn={class:"hash__rename"},Kn={class:"copy-external-link-box"},Yn={class:"markdown__icon-box"},Qn={class:"copy__btn--box"},Jn=["onClick"],Zn=["onClick"],er={__name:"upload",setup(G){const H=He(),T=xe(!1),w=xe(0),{config:v,setting:C}=Ue(H),R=xe(null),I=xe(!1),d=xe([]),D=Pt(),{uploadImgList:S}=Ue(D),j=()=>v.value.dirMode===4?v.value.selectedDirList.join("/"):v.value.selectedDir,s=async({file:p})=>{try{let g=pn(p.name),e=vt(p.name,C.value.isHash);I.value=!0;let a=await wn(p,{quality:C.value.compressValue});if(a.fileLen>1024*1024*10||p.size>1024*1024*10){Ie.warning({content:"\u6587\u4EF6\u4E0D\u80FD\u8D85\u8FC710M"});return}d.value.push({id:In(),isHash:C.value.isHash,isRename:!1,rename:g,fileSubfixName:e,filePrefixName:g,uploadDate:Date.now(),isUpload:"no",compressFile:a,isMarkdown:C.value.isMarkdown,githubUrl:"",jsdelivrUrl:""})}catch(g){console.log(g)}finally{I.value=!1}},t=()=>{d.value=[]},i=async()=>{if(w.value===d.value.length){Ie.info({content:"\u5DF2\u5168\u90E8\u4E0A\u4E0A\u4F20\u6210\u529F\uFF0C\u65E0\u9700\u91CD\u590D\u4E0A\u4F20"});return}T.value=!0;for(let p=0;p<d.value.length;p++){if(d.value[p].isUpload==="yes")continue;let g=be(d.value[p]);try{d.value[p].isUpload="loading";let e=await xt({login:v.value.login,repo:v.value.selectedRepo,branch:v.value.selectedBranch,dirs:v.value.dirMode===4?v.value.selectedDirList.join("/"):v.value.selectedDir,filename:g,message:`\u4E0A\u4F20\u4E86${g}\u6587\u4EF6\uFF0C\u6765\u6E90\u4E8E${location.origin+location.pathname}`,content:d.value[p].compressFile.base64.split(",")[1]});Ie.success({content:`${g}\u6587\u4EF6\u4E0A\u4F20\u6210\u529F`}),d.value[p].sha=e.content.sha,d.value[p].isUpload="yes",d.value[p].githubUrl=vn(g),d.value[p].jsdelivrUrl=mn(g),d.value[p].name=e.content.name,d.value[p].path=e.content.path,w.value++,D.setUploadImgList(d.value[p])}catch{}}T.value=!1},h=p=>{d.value.splice(p,1)},f=p=>{d.value[p].filePrefixName=d.value[p].rename,d.value[p].isRename=!1},n=p=>{d.value[p].isMarkdown=!d.value[p].isMarkdown},r=(p="github",g)=>{Dt(p,d.value[g])},l=p=>{p.fileSubfixName=vt(p.compressFile.origin.name,p.isHash)},x=p=>{},m=p=>{p.isRename=!1},k=p=>{const g=(p.clipboardData||window.clipboardData).items;let e=null;if(!g||g.length===0){Ie.error({content:"\u5F53\u524D\u6D4F\u89C8\u5668\u4E0D\u652F\u6301\u672C\u5730"});return}for(let a=0;a<g.length;a++)if(g[a].type.indexOf("image")!==-1){e=g[a].getAsFile();break}if(!e){Ie.error({content:"\u7C98\u8D34\u5185\u5BB9\u975E\u56FE\u7247"});return}R.value.customRequest({file:e})};return(p,g)=>{const e=Jt,a=Zt,o=en,_=yt,u=St,A=un,y=Ct,F=tn,q=nn,U=rn,pe=an,L=Yt;return Z(),_e(L,{onPaste:k,class:"container"},{default:M(()=>[V(S).length?(Z(),_e(Mn,{key:0})):Pe("",!0),E("div",{class:ht([{"page-upload-right":V(S).length},"wrapper"])},[$(a,{spinning:I.value,tip:"\u6B63\u5728\u538B\u7F29\u4E2D"},{default:M(()=>[$(e,{beforeUpload:p.handleBeforeUpload,accept:V(hn),ref_key:"uploadRef",ref:R,name:"file",multiple:!0,customRequest:s,showUploadList:!1},{default:M(()=>[E("p",Bn,[$(V(Qt))]),g[0]||(g[0]=E("p",{class:"ant-upload-text"},"\u62D6\u62FD\u3001\u7C98\u8D34\u3001\u6216\u8005\u70B9\u51FB\u6B64\u5904\u4E0A\u4F20",-1))]),_:1},8,["beforeUpload","accept"])]),_:1},8,["spinning"]),E("div",En,[V(v).id?(Z(),ye("div",On,[E("span",null,[g[1]||(g[1]=Y(" \u4ED3\u5E93: ")),$(o,{color:"blue"},{default:M(()=>[Y(ue(V(v).selectedRepo),1)]),_:1})]),E("span",null,[g[2]||(g[2]=Y(" \u5206\u652F: ")),$(o,{color:"blue"},{default:M(()=>[Y(ue(V(v).selectedBranch),1)]),_:1})]),E("span",null,[g[3]||(g[3]=Y(" \u76EE\u5F55: ")),$(o,{color:"blue"},{default:M(()=>[Y(ue(j()),1)]),_:1})])])):Pe("",!0),d.value.length?(Z(),ye("div",Gn," \u5DF2\u4E0A\u4F20 "+ue(w.value)+" / "+ue(d.value.length),1)):Pe("",!0)]),d.value.length?(Z(),ye("div",Nn,[E("ul",$n,[(Z(!0),ye(gt,null,wt(d.value,(z,ee)=>(Z(),ye("li",{key:z.id,class:"upload__list-item"},[E("div",{class:ht(["upload__icon",{success:z.isUpload}])},[z.isUpload==="no"?(Z(),_e(V(on),{key:0,rotate:"-45",style:{color:"white"}})):z.isUpload==="loading"?(Z(),_e(V(sn),{key:1})):(Z(),_e(V(ln),{key:2,rotate:"-45"}))],2),$(_,{class:"img__box",src:z.compressFile.base64},null,8,["src"]),E("div",jn,[E("div",Hn,[$(u,null,{title:M(()=>[Y(ue(V(be)(z)),1)]),default:M(()=>[E("span",zn,ue(V(be)(z)),1)]),_:2},1024),E("div",Wn,[E("span",null,[E("del",null,ue(V(je)(z.compressFile.origin.size))+"M",1)]),E("span",null,ue(V(je)(z.compressFile.fileLen))+"M",1),E("span",null,ue(V(gn)(z.uploadDate,"YYYY-MM-DD HH:mm:ss").value),1)])]),E("div",qn,[Ne(E("div",Vn,[E("div",Xn,[$(A,{onChange:ie=>l(z),checked:z.isHash,"onUpdate:checked":ie=>z.isHash=ie},{default:M(()=>g[4]||(g[4]=[Y("\u54C8\u5E0C\u5316")])),_:2},1032,["onChange","checked","onUpdate:checked"]),$(A,{onChange:ie=>x(z),checked:z.isRename,"onUpdate:checked":ie=>z.isRename=ie},{default:M(()=>g[5]||(g[5]=[Y("\u91CD\u547D\u540D")])),_:2},1032,["onChange","checked","onUpdate:checked"]),z.isRename?(Z(),_e(y,{key:0,size:"small",style:{"max-width":"240px"},"allow-clear":"",onBlur:ie=>f(ee),value:z.rename,"onUpdate:value":ie=>z.rename=ie,placeholder:"\u8BF7\u8F93\u5165\u91CD\u65B0\u4FEE\u6539\u7684\u6587\u4EF6\u540D"},{addonAfter:M(()=>[$(V(pt),{onClick:Se(ie=>m(z),["stop"])},null,8,["onClick"])]),_:2},1032,["onBlur","value","onUpdate:value"])):Pe("",!0)]),E("div",null,[$(V(pt),{class:"close__icon",onClick:Se(ie=>h(ee),["stop"])},null,8,["onClick"])])],512),[[$e,z.isUpload==="no"]]),Ne(E("div",Kn,[E("div",Yn,[$(u,null,{title:M(()=>g[6]||(g[6]=[Y(" \u70B9\u51FB\u8F6C\u6362markdown\u683C\u5F0F\u5916\u94FE ")])),default:M(()=>[$(V(_t),{onClick:Se(ie=>n(ee),["stop"]),class:"markdown__icon",component:z.isMarkdown?V(bt):V(It)},null,8,["onClick","component"])]),_:2},1024)]),E("div",Qn,[$(u,null,{title:M(()=>g[7]||(g[7]=[Y(" \u70B9\u51FB\u590D\u5236GitHub\u5916\u94FE ")])),default:M(()=>[E("span",{onClick:Se(ie=>r("github",ee),["stop"]),class:"copy__btn"},"GitHub",8,Jn)]),_:2},1024),$(u,null,{title:M(()=>g[8]||(g[8]=[Y(" \u70B9\u51FB\u590D\u5236CDN\u5916\u94FE ")])),default:M(()=>[E("span",{onClick:Se(ie=>r("cdn",ee),["stop"]),class:"copy__btn"},"CDN",8,Zn)]),_:2},1024)])],512),[[$e,z.isUpload==="yes"]])])])]))),128))])])):Pe("",!0),$(pe,{justify:"end"},{default:M(()=>[$(U,{span:4},{default:M(()=>[$(q,{class:"btns-box"},{default:M(()=>[$(F,{onClick:t},{default:M(()=>g[9]||(g[9]=[Y("\u91CD\u7F6E")])),_:1}),$(F,{loading:T.value,onClick:i,type:"primary"},{default:M(()=>g[10]||(g[10]=[Y("\u4E0A\u4F20")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})],2)]),_:1})}}};var sr=mt(er,[["__scopeId","data-v-54d67f32"]]);export{sr as default};
