import{o as p,i as B,av as ce,f as k,A as ie,aw as ue,x as _e,c as w,w as e,ai as de,a as t,ax as re,b as o,k as i,e as n,t as v,B as d,ay as pe,az as he,W as j,aA as ve,aB as ge,aC as fe,aD as me,j as G,F as O,ak as z,aE as ke,n as x,am as ye,at as Ce,G as be,a1 as we,a4 as xe,a5 as Me,aF as Se,aG as ze,V as Be,ad as P,aH as Fe,ah as De}from"./vendor.f554b10a.js";import{h as L,M as Ee,a as Le,u as Re,f as He}from"./useCopExternalLinks.21c542bc.js";/* empty css              */import{c as $e,u as Ve}from"./index.78179ea1.js";/* empty css              */import{_ as Ie,u as Te,a as Ne}from"./index.637462ab.js";const Ue={class:"icon",viewBox:"0 0 1052 1024",xmlns:"http://www.w3.org/2000/svg",width:"205.469",height:"200"},Ae=ce('<path d="M25.624 894.84V182.91c0-58.557 47.913-106.47 106.469-106.47h580.386c58.556 0 106.464 47.913 106.464 106.47v92.993" fill="#E3BD84"></path><path d="M25.624 894.84V182.91c0-58.557 47.913-106.47 106.469-106.47h580.386c58.556 0 106.464 47.913 106.464 106.47v92.993" fill="#E3BD84"></path><path d="M708.202 60.844H127.817c-58.557 0-106.47 47.913-106.47 106.47v51.316c0-58.557 47.913-106.47 106.47-106.47h580.385c58.557 0 106.465 47.913 106.465 106.47v-51.317c.004-58.56-47.904-106.469-106.465-106.469z" fill="#FFF" opacity=".15"></path><path d="M19.244 886.322h-4.277V174.391c0-59.887 48.721-108.607 108.603-108.607h580.386c59.886 0 108.607 48.72 108.607 108.607v92.994h-4.276V174.39c0-57.53-46.801-104.331-104.331-104.331H123.574c-57.525 0-104.326 46.805-104.326 104.33v711.932z" fill="#6E6E96"></path><path d="M34.211 886.322H0V174.391C0 106.25 55.435 50.816 123.57 50.816h580.386c68.144 0 123.574 55.435 123.574 123.575v92.994h-34.21V174.39c0-49.277-40.092-89.364-89.364-89.364H123.574c-49.272 0-89.359 40.091-89.359 89.364v711.931z" fill="#6E6E96"></path><path d="M806.174 217.787H303.811c-58.556 0-120.423 45.839-137.468 101.855L13.676 821.257c-14.476 47.562 7.83 87.76 50.722 98.818-3.07-13.731-2.472-29.216 2.51-45.581l152.667-501.615c17.046-56.02 78.912-101.86 137.468-101.86h449.131v-53.232z" fill="#966E6E" opacity=".15"></path><path d="M187.635 377.758c17.041-56.02 78.907-101.855 137.468-101.855h641.341c58.557 0 90.732 45.249 71.501 100.56L862.558 880.676c-19.24 55.307-82.889 100.56-141.441 100.56h-610.68c-58.552 0-92.519-45.844-75.465-101.851l152.663-501.628z" fill="#FFE494"></path><path d="M174.805 411.97c17.042-56.021 78.908-101.856 137.469-101.856h641.341c35.015 0 60.584 16.19 71.377 41.024l.116-.338c19.23-55.31-12.936-100.56-71.501-100.56H312.278c-58.552 0-120.423 45.84-137.468 101.856L22.143 853.71c-6.389 20.989-5.615 40.549.932 56.808l151.73-498.549z" fill="#FFF" opacity=".34"></path><path d="M858.303 821.103c-19.24 55.31-82.893 100.563-141.445 100.563h-610.68c-41.498 0-70.62-23.045-78.005-56.397l-1.72 5.641c-17.05 56.016 16.91 101.85 75.47 101.85h610.68c58.552 0 122.206-45.252 141.445-100.559l175.379-504.214c6.15-17.7 7.026-34.357 3.472-48.84L858.303 821.102z" fill="#966E6E" opacity=".15"></path><path d="M708.343 989.823H97.66c-33.878 0-62.23-13.086-79.836-36.845-17.602-23.76-21.865-54.686-12-87.093l152.671-501.619c19.124-62.85 88.132-113.978 153.83-113.978h641.35c34.01 0 62.016 13.043 78.856 36.73s19.963 54.425 8.793 86.55L865.945 877.785c-21.493 61.773-92.19 112.037-157.602 112.037zM312.33 284.495c-50.842 0-106.303 41.091-121.103 89.727L38.556 875.849c-6.629 21.775-4.23 41.934 6.76 56.76 10.991 14.835 29.58 23.003 52.348 23.003h610.684c51.115 0 108.491-40.788 125.29-89.072l175.378-504.215c7.432-21.374 5.884-41.075-4.362-55.486s-28.348-22.344-50.975-22.344H312.33z" fill="#6E6E96"></path>',10),je=[Ae];function Ge(q,F){return p(),B("svg",Ue,je)}var Oe={render:Ge};const Pe={class:"github__config"},qe=n(" \u4ED3\u5E93: "),Je=n(" \u5206\u652F: "),We=n(" \u76EE\u5F55: "),Ke=n(" \u56FE\u7247\u6570\u91CF: "),Qe={key:0,class:"selectedop__box"},Xe={class:"left__op"},Ye=n(" \u5168\u90E8 "),Ze=n("\u53D6\u6D88\u9009\u62E9"),et={class:"right_btn"},tt=n(" \u6279\u91CF\u590D\u5236\u5916\u94FE "),at=n(" \u6279\u91CF\u5220\u9664\u56FE\u7247 "),lt=n(" \u8FD4\u56DE\u4E0A\u4E00\u5C42 "),nt=n(" \u91CD\u65B0\u52A0\u8F7D\u56FE\u7247 "),ot=n(" \u53CC\u51FB\u8FDB\u5165 "),st={class:"filename"},ct={class:"filename"},it={class:"copy-external-link-box"},ut={class:"markdown__icon-box"},_t=n(" \u70B9\u51FB\u8F6C\u6362markdown\u683C\u5F0F\u5916\u94FE "),dt={class:"copy__btn--box"},rt=n(" \u70B9\u51FB\u590D\u5236GitHub\u5916\u94FE "),pt=["onClick"],ht=n(" \u70B9\u51FB\u590D\u5236CDN\u5916\u94FE "),vt=["onClick"],gt={setup(q){const F=Te(),M=k(!1),R=k(),g=k(-1),{config:h,imageContents:s,dirsContents:H}=ie(F),u=k([]),f=k({page:0,pageSize:40,countPage:0}),y=k("block"),$=k(!1),m=k("/");ue(async()=>{await S()});const J=a=>{if(a.target.checked)for(let _=0;_<s.value.length;_++)u.value.push(s.value.name);else u.value=[]},D=()=>{u.value=[]},W=async()=>{const a=[...ke(u.value)];for(let l=0;l<a.length;l++)try{g.value=s.value.findIndex(_=>_.name===a[l]),await Ne({login:h.value.login,repo:h.value.selectedRepo,dirs:m.value,filename:s.value[g.value].name,data:{message:`delete picture via PicR(${location.origin+location.pathname})`,owner:h.value.login,path:s.value[g.value].path,repo:h.value.selectedRepo,sha:s.value[g.value].sha}}),s.value.shift(),u.value.shift(),x.success({content:`${s.value[g.value].name}\u6587\u4EF6\u5220\u9664\u6210\u529F`})}catch(_){console.log(_),x.error({content:`${s.value[g.value].name}\u6587\u4EF6\u5220\u9664\u5931\u8D25`})}finally{g.value=-1}},K=()=>{let a=[];for(let C=0;C<u.value.length;C++)a.push(L(s.value[u.value[C]].path,!0));const{copy:l,isSupported:_}=$e({source:a.join(",")});if(!_){x.warning({content:"\u62B1\u6B49\u4F60\u7684\u6D4F\u89C8\u5668\u4E0D\u652F\u6301\u590D\u5236\u529F\u80FD"});return}l().then(()=>{x.success({content:"cdn\u5916\u94FE\u590D\u5236\u6210\u529F"})}).catch(()=>{x.error({content:"cdn\u5916\u94FE\u590D\u5236\u5931\u8D25"})})},Q=async a=>{m.value=H.value[a].path,await S(),D()},X=async()=>{let a=m.value.split("/");a.length<=1?m.value="/":(a.pop(),m.value=a.join("/")),await S(),D()},Y=()=>{f.value.page=0,S()},Z=()=>R.value.$el,ee=a=>{s.value[a].isMarkdown=!s.value[a].isMarkdown},V=(a,l)=>{Re(a,{isMarkdown:s.value[l].isMarkdown,githubUrl:He(s.value[l].path,!0),jsdelivrUrl:L(s.value[l].path,!0),filename:s.value[l].name},!0)},I=Ve(a=>{f.value.countPage=Math.ceil(s.value.length/f.value.pageSize),!(f.value.page>=f.value.countPage)&&a.target.scrollHeight-a.target.clientHeight-a.target.scrollTop<=200&&f.value.page++}),T=a=>{y.value=a},S=async()=>{try{M.value=!0,F.getBranchCatalogue({repo:h.value.selectedRepo,dir:m.value,query:{ref:h.value.selectedBranch}})}catch{}finally{_e(()=>{M.value=!1})}};return(a,l)=>{const _=ye,C=Ce,te=be,r=we,N=xe,U=Fe,ae=De,A=Me,le=Se,ne=ze,oe=Be,se=de;return p(),w(se,null,{default:e(()=>[t(A,{wrapperClassName:"loading__container",spinning:M.value,tip:"Loading..."},{default:e(()=>[t(oe,{ref_key:"cardContainerRef",ref:R,bordered:"",loading:M.value,headStyle:{paddingRight:"40px","min-height":u.value.length?"94px":""},class:z(["card__container",{hasSelectedOp:u.value.length}])},re({extra:e(()=>[t(N,{size:"middle"},{default:e(()=>[t(r,null,{title:e(()=>[lt]),default:e(()=>[m.value!=="/"?(p(),w(o(ve),{key:0,onClick:d(X,["stop"]),style:{fontSize:"24px"}},null,8,["onClick"])):j("",!0)]),_:1}),t(r,null,{title:e(()=>[n(v(y.value==="block"?"\u5207\u6362\u5217\u8868":"\u5207\u6362\u65B9\u5757"),1)]),default:e(()=>[y.value==="list"?(p(),w(o(ge),{key:0,onClick:l[1]||(l[1]=d(c=>T("block"),["stop"])),style:{fontSize:"24px"}})):(p(),w(o(fe),{key:1,onClick:l[2]||(l[2]=d(c=>T("list"),["stop"])),style:{fontSize:"24px"}}))]),_:1}),t(r,null,{title:e(()=>[nt]),default:e(()=>[t(o(me),{onClick:d(Y,["stop"]),style:{fontSize:"24px"}},null,8,["onClick"])]),_:1})]),_:1})]),default:e(()=>[i("div",{onScroll:l[4]||(l[4]=(...c)=>o(I)&&o(I)(...c)),class:"card__body"},[t(le,{value:u.value,"onUpdate:value":l[3]||(l[3]=c=>u.value=c)},{default:e(()=>[(p(!0),B(O,null,G(o(H),(c,b)=>(p(),w(U,{class:z(["card__grid card__dir",{card__block:y.value==="block",card__list:y.value==="list"}]),key:c.name},{default:e(()=>[t(r,null,{title:e(()=>[ot]),default:e(()=>[t(o(P),{onDblclick:d(E=>Q(b),["stop"]),class:"dir__icon",style:{fontSize:"120px"},component:o(Oe)},null,8,["onDblclick","component"])]),_:2},1024),i("div",st,v(c.name),1)]),_:2},1032,["class"]))),128)),(p(!0),B(O,null,G(o(s).slice(0,(f.value.page+1)*f.value.pageSize),(c,b)=>(p(),w(U,{key:c.name,class:z(["card__grid card_img",{card__block:y.value==="block",card__list:y.value==="list"}])},{default:e(()=>[t(A,{spinning:g.value===b},{default:e(()=>[t(C,{class:z([{selected:u.value.includes(c.name)},"img__selected_checkbox"]),value:c.name},null,8,["class","value"]),t(ae,{src:o(L)(c.path)},null,8,["src"]),i("div",ct,[t(r,null,{title:e(()=>[n(v(c.name),1)]),default:e(()=>[n(" "+v(c.name),1)]),_:2},1024)]),i("div",it,[i("div",ut,[t(r,null,{title:e(()=>[_t]),default:e(()=>[t(o(P),{onClick:d(E=>ee(b),["stop"]),class:"markdown__icon",component:c.isMarkdown?o(Le):o(Ee)},null,8,["onClick","component"])]),_:2},1024)]),i("div",dt,[t(r,null,{title:e(()=>[rt]),default:e(()=>[i("span",{onClick:d(E=>V("github",b),["stop"]),class:"copy__btn"},"GitHub",8,pt)]),_:2},1024),t(r,null,{title:e(()=>[ht]),default:e(()=>[i("span",{onClick:d(E=>V("cdn",b),["stop"]),class:"copy__btn"},"CDN",8,vt)]),_:2},1024)])])]),_:2},1032,["spinning"])]),_:2},1032,["class"]))),128))]),_:1},8,["value"])],32),t(ne,{target:Z})]),_:2},[o(h).id?{name:"title",fn:e(()=>[i("div",Pe,[i("span",null,[qe,t(_,{color:"blue"},{default:e(()=>[n(v(o(h).selectedRepo),1)]),_:1})]),i("span",null,[Je,t(_,{color:"blue"},{default:e(()=>[n(v(o(h).selectedBranch),1)]),_:1})]),i("span",null,[We,t(_,{color:"blue"},{default:e(()=>[n(v(m.value),1)]),_:1})]),i("span",null,[Ke,t(_,{color:"blue"},{default:e(()=>[n(v(o(s).length),1)]),_:1})])]),u.value.length?(p(),B("div",Qe,[i("div",Xe,[t(C,{checked:$.value,"onUpdate:checked":l[0]||(l[0]=c=>$.value=c),indeterminate:a.indeterminate,onChange:J},{default:e(()=>[Ye]),_:1},8,["checked","indeterminate"]),i("div",null,"\u5DF2\u9009\u62E9 "+v(u.value.length)+" \u5F20\u56FE\u7247",1),t(te,{type:"link",onClick:d(D,["stop"])},{default:e(()=>[Ze]),_:1},8,["onClick"])]),i("div",et,[t(N,null,{default:e(()=>[t(r,null,{title:e(()=>[tt]),default:e(()=>[t(o(pe),{onClick:d(K,["stop"]),style:{"font-size":"24px"}},null,8,["onClick"])]),_:1}),t(r,null,{title:e(()=>[at]),default:e(()=>[t(o(he),{onClick:d(W,["stop"]),style:{"font-size":"24px"}},null,8,["onClick"])]),_:1})]),_:1})])])):j("",!0)])}:void 0]),1032,["loading","headStyle","class"])]),_:1},8,["spinning"])]),_:1})}}};var wt=Ie(gt,[["__scopeId","data-v-211e2834"]]);export{wt as default};
