import{ad as Gt,q as $t,A as Me,f as we,o as Z,i as ye,k as L,a as H,w as O,F as ht,j as pt,c as he,e as Q,t as le,b as q,X as Ae,y as Ge,z as $e,ae as vt,B as Se,x as Nt,n as be,af as lt,ag as jt,p as ut,_ as Ht,M as zt,ah as Wt,ai as mt,a2 as gt,Y as _t,aj as qt,W as Vt,ak as Xt,al as ct,C as Kt,D as Yt,am as Qt,a6 as Jt,an as Zt,G as en,a5 as tn,ao as nn,ap as rn,aq as an,ar as on,as as sn,at as dt,au as ln}from"./vendor.f69038fa.js";import{a as un}from"./index.f3bbd6c6.js";/* empty css              */import{g as Ce,M as wt,a as xt,b as cn,u as yt,c as dn,j as fn,m as hn,d as pn,e as ft,f as vn,h as mn}from"./useCopExternalLinks.353b1f83.js";import{_ as St,u as bt,r as Ct}from"./index.40b305eb.js";var It={exports:{}};(function(G,W){(function(x,p){G.exports=p()})(Gt,function(){return function(M){var x={};function p(I){if(x[I])return x[I].exports;var A=x[I]={exports:{},id:I,loaded:!1};return M[I].call(A.exports,A,A.exports,p),A.loaded=!0,A.exports}return p.m=M,p.c=x,p.p="",p(0)}([function(M,x,p){p(7),p(8),M.exports=p(9)},function(M,x,p){(function(I){(function(A){var v=typeof I=="function"&&I||function(n){setTimeout(n,1)};function g(n,o){return function(){n.apply(o,arguments)}}var P=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"};function C(n){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");if(typeof n!="function")throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],a(n,g(l,this),g(t,this))}function N(n){var o=this;if(this._state===null){this._deferreds.push(n);return}v(function(){var f=o._state?n.onFulfilled:n.onRejected;if(f===null){(o._state?n.resolve:n.reject)(o._value);return}var _;try{_=f(o._value)}catch(m){n.reject(m);return}n.resolve(_)})}function l(n){try{if(n===this)throw new TypeError("A promise cannot be resolved with itself.");if(n&&(typeof n=="object"||typeof n=="function")){var o=n.then;if(typeof o=="function"){a(g(o,n),g(l,this),g(t,this));return}}this._state=!0,this._value=n,s.call(this)}catch(f){t.call(this,f)}}function t(n){this._state=!1,this._value=n,s.call(this)}function s(){for(var n=0,o=this._deferreds.length;n<o;n++)N.call(this,this._deferreds[n]);this._deferreds=null}function c(n,o,f,_){this.onFulfilled=typeof n=="function"?n:null,this.onRejected=typeof o=="function"?o:null,this.resolve=f,this.reject=_}function a(n,o,f){var _=!1;try{n(function(m){_||(_=!0,o(m))},function(m){_||(_=!0,f(m))})}catch(m){if(_)return;_=!0,f(m)}}C.prototype.catch=function(n){return this.then(null,n)},C.prototype.then=function(n,o){var f=this;return new C(function(_,m){N.call(f,new c(n,o,_,m))})},C.all=function(){var n=Array.prototype.slice.call(arguments.length===1&&P(arguments[0])?arguments[0]:arguments);return new C(function(o,f){if(n.length===0)return o([]);var _=n.length;function m(y,k){try{if(k&&(typeof k=="object"||typeof k=="function")){var e=k.then;if(typeof e=="function"){e.call(k,function(r){m(y,r)},f);return}}n[y]=k,--_===0&&o(n)}catch(r){f(r)}}for(var h=0;h<n.length;h++)m(h,n[h])})},C.resolve=function(n){return n&&typeof n=="object"&&n.constructor===C?n:new C(function(o){o(n)})},C.reject=function(n){return new C(function(o,f){f(n)})},C.race=function(n){return new C(function(o,f){for(var _=0,m=n.length;_<m;_++)n[_].then(o,f)})},C._setImmediateFn=function(o){v=o},C.prototype.always=function(n){var o=this.constructor;return this.then(function(f){return o.resolve(n()).then(function(){return f})},function(f){return o.resolve(n()).then(function(){throw f})})},typeof M!="undefined"&&M.exports?M.exports=C:A.Promise||(A.Promise=C)})(this)}).call(x,p(2).setImmediate)},function(M,x,p){(function(I){var A=typeof I!="undefined"&&I||typeof self!="undefined"&&self||window,v=Function.prototype.apply;x.setTimeout=function(){return new g(v.call(setTimeout,A,arguments),clearTimeout)},x.setInterval=function(){return new g(v.call(setInterval,A,arguments),clearInterval)},x.clearTimeout=x.clearInterval=function(P){P&&P.close()};function g(P,C){this._id=P,this._clearFn=C}g.prototype.unref=g.prototype.ref=function(){},g.prototype.close=function(){this._clearFn.call(A,this._id)},x.enroll=function(P,C){clearTimeout(P._idleTimeoutId),P._idleTimeout=C},x.unenroll=function(P){clearTimeout(P._idleTimeoutId),P._idleTimeout=-1},x._unrefActive=x.active=function(P){clearTimeout(P._idleTimeoutId);var C=P._idleTimeout;C>=0&&(P._idleTimeoutId=setTimeout(function(){P._onTimeout&&P._onTimeout()},C))},p(3),x.setImmediate=typeof self!="undefined"&&self.setImmediate||typeof I!="undefined"&&I.setImmediate||this&&this.setImmediate,x.clearImmediate=typeof self!="undefined"&&self.clearImmediate||typeof I!="undefined"&&I.clearImmediate||this&&this.clearImmediate}).call(x,function(){return this}())},function(M,x,p){(function(I,A){(function(v,g){if(v.setImmediate)return;var P=1,C={},N=!1,l=v.document,t;function s(e){typeof e!="function"&&(e=new Function(""+e));for(var r=new Array(arguments.length-1),i=0;i<r.length;i++)r[i]=arguments[i+1];var w={callback:e,args:r};return C[P]=w,t(P),P++}function c(e){delete C[e]}function a(e){var r=e.callback,i=e.args;switch(i.length){case 0:r();break;case 1:r(i[0]);break;case 2:r(i[0],i[1]);break;case 3:r(i[0],i[1],i[2]);break;default:r.apply(g,i);break}}function n(e){if(N)setTimeout(n,0,e);else{var r=C[e];if(r){N=!0;try{a(r)}finally{c(e),N=!1}}}}function o(){t=function(e){A.nextTick(function(){n(e)})}}function f(){if(v.postMessage&&!v.importScripts){var e=!0,r=v.onmessage;return v.onmessage=function(){e=!1},v.postMessage("","*"),v.onmessage=r,e}}function _(){var e="setImmediate$"+Math.random()+"$",r=function(i){i.source===v&&typeof i.data=="string"&&i.data.indexOf(e)===0&&n(+i.data.slice(e.length))};v.addEventListener?v.addEventListener("message",r,!1):v.attachEvent("onmessage",r),t=function(i){v.postMessage(e+i,"*")}}function m(){var e=new MessageChannel;e.port1.onmessage=function(r){var i=r.data;n(i)},t=function(r){e.port2.postMessage(r)}}function h(){var e=l.documentElement;t=function(r){var i=l.createElement("script");i.onreadystatechange=function(){n(r),i.onreadystatechange=null,e.removeChild(i),i=null},e.appendChild(i)}}function y(){t=function(e){setTimeout(n,0,e)}}var k=Object.getPrototypeOf&&Object.getPrototypeOf(v);k=k&&k.setTimeout?k:v,{}.toString.call(v.process)==="[object process]"?o():f()?_():v.MessageChannel?m():l&&"onreadystatechange"in l.createElement("script")?h():y(),k.setImmediate=s,k.clearImmediate=c})(typeof self=="undefined"?typeof I=="undefined"?this:I:self)}).call(x,function(){return this}(),p(4))},function(M,x){var p=M.exports={},I,A;function v(){throw new Error("setTimeout has not been defined")}function g(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?I=setTimeout:I=v}catch{I=v}try{typeof clearTimeout=="function"?A=clearTimeout:A=g}catch{A=g}})();function P(f){if(I===setTimeout)return setTimeout(f,0);if((I===v||!I)&&setTimeout)return I=setTimeout,setTimeout(f,0);try{return I(f,0)}catch{try{return I.call(null,f,0)}catch{return I.call(this,f,0)}}}function C(f){if(A===clearTimeout)return clearTimeout(f);if((A===g||!A)&&clearTimeout)return A=clearTimeout,clearTimeout(f);try{return A(f)}catch{try{return A.call(null,f)}catch{return A.call(this,f)}}}var N=[],l=!1,t,s=-1;function c(){!l||!t||(l=!1,t.length?N=t.concat(N):s=-1,N.length&&a())}function a(){if(!l){var f=P(c);l=!0;for(var _=N.length;_;){for(t=N,N=[];++s<_;)t&&t[s].run();s=-1,_=N.length}t=null,l=!1,C(f)}}p.nextTick=function(f){var _=new Array(arguments.length-1);if(arguments.length>1)for(var m=1;m<arguments.length;m++)_[m-1]=arguments[m];N.push(new n(f,_)),N.length===1&&!l&&P(a)};function n(f,_){this.fun=f,this.array=_}n.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={};function o(){}p.on=o,p.addListener=o,p.once=o,p.off=o,p.removeListener=o,p.removeAllListeners=o,p.emit=o,p.prependListener=o,p.prependOnceListener=o,p.listeners=function(f){return[]},p.binding=function(f){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(f){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},function(M,x){var p=function(){try{return new Blob,!0}catch{return!1}}()?window.Blob:function(v,g){var P=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MSBlobBuilder||window.MozBlobBuilder);return v.forEach(function(C){P.append(C)}),P.getBlob(g?g.type:void 0)};function I(){var v=~navigator.userAgent.indexOf("Android")&&~navigator.vendor.indexOf("Google")&&!~navigator.userAgent.indexOf("Chrome");return v&&navigator.userAgent.match(/AppleWebKit\/(\d+)/).pop()<=534||/MQQBrowser/g.test(navigator.userAgent)}var A=function(){var v=0;function g(){var P=this,C=[],N=Array(21).join("-")+(+new Date*(1e16*Math.random())).toString(36),l=XMLHttpRequest.prototype.send;this.getParts=function(){return C.toString()},this.append=function(t,s,c){C.push("--"+N+`\r
Content-Disposition: form-data; name="`+t+'"'),s instanceof Blob?(C.push('; filename="'+(c||"blob")+`"\r
Content-Type: `+s.type+`\r
\r
`),C.push(s)):C.push(`\r
\r
`+s),C.push(`\r
`)},v++,XMLHttpRequest.prototype.send=function(t){var s,c,a=this;t===P?(C.push("--"+N+`--\r
`),c=new p(C),s=new FileReader,s.onload=function(){l.call(a,s.result)},s.onerror=function(n){throw n},s.readAsArrayBuffer(c),this.setRequestHeader("Content-Type","multipart/form-data; boundary="+N),v--,v==0&&(XMLHttpRequest.prototype.send=l)):l.call(this,t)}}return g.prototype=Object.create(FormData.prototype),g}();M.exports={Blob:p,FormData:I()?A:FormData}},function(M,x,p){var I,A;(function(){var v=!1,g=function(e){if(e instanceof g)return e;if(!(this instanceof g))return new g(e);this.EXIFwrapped=e};typeof M!="undefined"&&M.exports&&(x=M.exports=g),x.EXIF=g;var P=g.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},C=g.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},N=g.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},l=g.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function t(e){return!!e.exifdata}function s(e,r){r=r||e.match(/^data\:([^\;]+)\;base64,/mi)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gmi,"");for(var i=atob(e),w=i.length,d=new ArrayBuffer(w),F=new Uint8Array(d),S=0;S<w;S++)F[S]=i.charCodeAt(S);return d}function c(e,r){var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="blob",i.onload=function(w){(this.status==200||this.status===0)&&r(this.response)},i.send()}function a(e,r){function i(S){var U=n(S),z=o(S);e.exifdata=U||{},e.iptcdata=z||{},r&&r.call(e)}if(e.src)if(/^data\:/i.test(e.src)){var w=s(e.src);i(w)}else if(/^blob\:/i.test(e.src)){var d=new FileReader;d.onload=function(S){i(S.target.result)},c(e.src,function(S){d.readAsArrayBuffer(S)})}else{var F=new XMLHttpRequest;F.onload=function(){this.status==200||this.status===0?i(F.response):r(new Error("Could not load image")),F=null},F.open("GET",e.src,!0),F.responseType="arraybuffer",F.send(null)}else if(window.FileReader&&(e instanceof window.Blob||e instanceof window.File)){var d=new FileReader;d.onload=function(U){i(U.target.result)},d.readAsArrayBuffer(e)}}function n(e){var r=new DataView(e);if(r.getUint8(0)!=255||r.getUint8(1)!=216)return!1;for(var i=2,w=e.byteLength,d;i<w;){if(r.getUint8(i)!=255)return!1;if(d=r.getUint8(i+1),d==225)return k(r,i+4,r.getUint16(i+2)-2);i+=2+r.getUint16(i+2)}}function o(e){var r=new DataView(e);if(r.getUint8(0)!=255||r.getUint8(1)!=216)return!1;for(var i=2,w=e.byteLength,d=function(z,T){return z.getUint8(T)===56&&z.getUint8(T+1)===66&&z.getUint8(T+2)===73&&z.getUint8(T+3)===77&&z.getUint8(T+4)===4&&z.getUint8(T+5)===4};i<w;){if(d(r,i)){var F=r.getUint8(i+7);F%2!==0&&(F+=1),F===0&&(F=4);var S=i+8+F,U=r.getUint16(i+6+F);return _(e,S,U)}i++}}var f={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};function _(e,r,i){for(var w=new DataView(e),d={},F,S,U,z,T=r;T<r+i;)w.getUint8(T)===28&&w.getUint8(T+1)===2&&(z=w.getUint8(T+2),z in f&&(U=w.getInt16(T+3),S=f[z],F=y(w,T+5,U),d.hasOwnProperty(S)?d[S]instanceof Array?d[S].push(F):d[S]=[d[S],F]:d[S]=F)),T++;return d}function m(e,r,i,w,d){var F=e.getUint16(i,!d),S={},U,z,T;for(T=0;T<F;T++)U=i+T*12+2,z=w[e.getUint16(U,!d)],!z&&v&&console.log("Unknown tag: "+e.getUint16(U,!d)),S[z]=h(e,U,r,i,d);return S}function h(e,r,i,w,d){var F=e.getUint16(r+2,!d),S=e.getUint32(r+4,!d),U=e.getUint32(r+8,!d)+i,z,T,pe,b,ie,K;switch(F){case 1:case 7:if(S==1)return e.getUint8(r+8,!d);for(z=S>4?U:r+8,T=[],b=0;b<S;b++)T[b]=e.getUint8(z+b);return T;case 2:return z=S>4?U:r+8,y(e,z,S-1);case 3:if(S==1)return e.getUint16(r+8,!d);for(z=S>2?U:r+8,T=[],b=0;b<S;b++)T[b]=e.getUint16(z+2*b,!d);return T;case 4:if(S==1)return e.getUint32(r+8,!d);for(T=[],b=0;b<S;b++)T[b]=e.getUint32(U+4*b,!d);return T;case 5:if(S==1)return ie=e.getUint32(U,!d),K=e.getUint32(U+4,!d),pe=new Number(ie/K),pe.numerator=ie,pe.denominator=K,pe;for(T=[],b=0;b<S;b++)ie=e.getUint32(U+8*b,!d),K=e.getUint32(U+4+8*b,!d),T[b]=new Number(ie/K),T[b].numerator=ie,T[b].denominator=K;return T;case 9:if(S==1)return e.getInt32(r+8,!d);for(T=[],b=0;b<S;b++)T[b]=e.getInt32(U+4*b,!d);return T;case 10:if(S==1)return e.getInt32(U,!d)/e.getInt32(U+4,!d);for(T=[],b=0;b<S;b++)T[b]=e.getInt32(U+8*b,!d)/e.getInt32(U+4+8*b,!d);return T}}function y(e,r,i){var w="",d;for(d=r;d<r+i;d++)w+=String.fromCharCode(e.getUint8(d));return w}function k(e,r){if(y(e,r,4)!="Exif")return!1;var i,w,d,F,S,U=r+6;if(e.getUint16(U)==18761)i=!1;else if(e.getUint16(U)==19789)i=!0;else return!1;if(e.getUint16(U+2,!i)!=42)return!1;var z=e.getUint32(U+4,!i);if(z<8)return!1;if(w=m(e,U,U+z,C,i),w.ExifIFDPointer){F=m(e,U,U+w.ExifIFDPointer,P,i);for(d in F){switch(d){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":F[d]=l[d][F[d]];break;case"ExifVersion":case"FlashpixVersion":F[d]=String.fromCharCode(F[d][0],F[d][1],F[d][2],F[d][3]);break;case"ComponentsConfiguration":F[d]=l.Components[F[d][0]]+l.Components[F[d][1]]+l.Components[F[d][2]]+l.Components[F[d][3]];break}w[d]=F[d]}}if(w.GPSInfoIFDPointer){S=m(e,U,U+w.GPSInfoIFDPointer,N,i);for(d in S){switch(d){case"GPSVersionID":S[d]=S[d][0]+"."+S[d][1]+"."+S[d][2]+"."+S[d][3];break}w[d]=S[d]}}return w}g.getData=function(e,r){return(e instanceof Image||e instanceof HTMLImageElement)&&!e.complete?!1:(t(e)?r&&r.call(e):a(e,r),!0)},g.getTag=function(e,r){if(!!t(e))return e.exifdata[r]},g.getAllTags=function(e){if(!t(e))return{};var r,i=e.exifdata,w={};for(r in i)i.hasOwnProperty(r)&&(w[r]=i[r]);return w},g.pretty=function(e){if(!t(e))return"";var r,i=e.exifdata,w="";for(r in i)i.hasOwnProperty(r)&&(typeof i[r]=="object"?i[r]instanceof Number?w+=r+" : "+i[r]+" ["+i[r].numerator+"/"+i[r].denominator+`]\r
`:w+=r+" : ["+i[r].length+` values]\r
`:w+=r+" : "+i[r]+`\r
`);return w},g.readFromBinaryFile=function(e){return n(e)},I=[],A=function(){return g}.apply(x,I),A!==void 0&&(M.exports=A)}).call(this)},function(M,x,p){var I,A;(function(){function v(t){var s=t.naturalWidth,c=t.naturalHeight;if(s*c>1024*1024){var a=document.createElement("canvas");a.width=a.height=1;var n=a.getContext("2d");return n.drawImage(t,-s+1,0),n.getImageData(0,0,1,1).data[3]===0}else return!1}function g(t,s,c){var a=document.createElement("canvas");a.width=1,a.height=c;var n=a.getContext("2d");n.drawImage(t,0,0);for(var o=n.getImageData(0,0,1,c).data,f=0,_=c,m=c;m>f;){var h=o[(m-1)*4+3];h===0?_=m:f=m,m=_+f>>1}var y=m/c;return y===0?1:y}function P(t,s,c){var a=document.createElement("canvas");return C(t,a,s,c),a.toDataURL("image/jpeg",s.quality||.8)}function C(t,s,c,a){var n=t.naturalWidth,o=t.naturalHeight,f=c.width,_=c.height,m=s.getContext("2d");m.save(),N(s,m,f,_,c.orientation);var h=v(t);h&&(n/=2,o/=2);var y=1024,k=document.createElement("canvas");k.width=k.height=y;for(var e=k.getContext("2d"),r=a?g(t,n,o):1,i=Math.ceil(y*f/n),w=Math.ceil(y*_/o/r),d=0,F=0;d<o;){for(var S=0,U=0;S<n;)e.clearRect(0,0,y,y),e.drawImage(t,-S,-d),m.drawImage(k,0,0,y,y,U,F,i,w),S+=y,U+=i;d+=y,F+=w}m.restore(),k=e=null}function N(t,s,c,a,n){switch(n){case 5:case 6:case 7:case 8:t.width=a,t.height=c;break;default:t.width=c,t.height=a}switch(n){case 2:s.translate(c,0),s.scale(-1,1);break;case 3:s.translate(c,a),s.rotate(Math.PI);break;case 4:s.translate(0,a),s.scale(1,-1);break;case 5:s.rotate(.5*Math.PI),s.scale(1,-1);break;case 6:s.rotate(.5*Math.PI),s.translate(0,-a);break;case 7:s.rotate(.5*Math.PI),s.translate(c,-a),s.scale(-1,1);break;case 8:s.rotate(-.5*Math.PI),s.translate(-c,0);break}}function l(t){if(window.Blob&&t instanceof Blob){var s=new Image,c=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;if(!c)throw Error("No createObjectURL function found to create blob url");s.src=c.createObjectURL(t),this.blob=t,t=s}if(!t.naturalWidth&&!t.naturalHeight){var a=this;t.onload=function(){var n=a.imageLoadListeners;if(n){a.imageLoadListeners=null;for(var o=0,f=n.length;o<f;o++)n[o]()}},this.imageLoadListeners=[]}this.srcImage=t}l.prototype.render=function(t,s,c){if(this.imageLoadListeners){var a=this;this.imageLoadListeners.push(function(){a.render(t,s,c)});return}s=s||{};var n=this.srcImage,o=n.src,f=o.length,_=n.naturalWidth,m=n.naturalHeight,h=s.width,y=s.height,k=s.maxWidth,e=s.maxHeight,r=this.blob&&this.blob.type==="image/jpeg"||o.indexOf("data:image/jpeg")===0||o.indexOf(".jpg")===f-4||o.indexOf(".jpeg")===f-5;h&&!y?y=m*h/_<<0:y&&!h?h=_*y/m<<0:(h=_,y=m),k&&h>k&&(h=k,y=m*h/_<<0),e&&y>e&&(y=e,h=_*y/m<<0);var i={width:h,height:y};for(var w in s)i[w]=s[w];var d=t.tagName.toLowerCase();d==="img"?t.src=P(this.srcImage,i,r):d==="canvas"&&C(this.srcImage,t,i,r),typeof this.onrender=="function"&&this.onrender(t),c&&c()},I=[],A=function(){return l}.apply(x,I),A!==void 0&&(M.exports=A)})()},function(M,x){function p(I){var A=Math.floor,v=new Array(64),g=new Array(64),P=new Array(64),C=new Array(64),N,l,t,s,c=new Array(65535),a=new Array(65535),n=new Array(64),o=new Array(64),f=[],_=0,m=7,h=new Array(64),y=new Array(64),k=new Array(64),e=new Array(256),r=new Array(2048),i,w=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],d=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],F=[0,1,2,3,4,5,6,7,8,9,10,11],S=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],U=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],z=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],T=[0,1,2,3,4,5,6,7,8,9,10,11],pe=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],b=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ie(u){for(var B=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],E=0;E<64;E++){var $=A((B[E]*u+50)/100);$<1?$=1:$>255&&($=255),v[w[E]]=$}for(var j=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],V=0;V<64;V++){var Y=A((j[V]*u+50)/100);Y<1?Y=1:Y>255&&(Y=255),g[w[V]]=Y}for(var X=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ae=0,ee=0;ee<8;ee++)for(var R=0;R<8;R++)P[ae]=1/(v[w[ae]]*X[ee]*X[R]*8),C[ae]=1/(g[w[ae]]*X[ee]*X[R]*8),ae++}function K(u,B){for(var E=0,$=0,j=new Array,V=1;V<=16;V++){for(var Y=1;Y<=u[V];Y++)j[B[$]]=[],j[B[$]][0]=E,j[B[$]][1]=V,$++,E++;E*=2}return j}function At(){N=K(d,F),l=K(z,T),t=K(S,U),s=K(pe,b)}function Pt(){for(var u=1,B=2,E=1;E<=15;E++){for(var $=u;$<B;$++)a[32767+$]=E,c[32767+$]=[],c[32767+$][1]=E,c[32767+$][0]=$;for(var j=-(B-1);j<=-u;j++)a[32767+j]=E,c[32767+j]=[],c[32767+j][1]=E,c[32767+j][0]=B-1+j;u<<=1,B<<=1}}function Rt(){for(var u=0;u<256;u++)r[u]=19595*u,r[u+256>>0]=38470*u,r[u+512>>0]=7471*u+32768,r[u+768>>0]=-11059*u,r[u+1024>>0]=-21709*u,r[u+1280>>0]=32768*u+8421375,r[u+1536>>0]=-27439*u,r[u+1792>>0]=-5329*u}function ve(u){for(var B=u[0],E=u[1]-1;E>=0;)B&1<<E&&(_|=1<<m),E--,m--,m<0&&(_==255?(D(255),D(0)):D(_),m=7,_=0)}function D(u){f.push(e[u])}function re(u){D(u>>8&255),D(u&255)}function Ft(u,B){var E,$,j,V,Y,X,ae,ee,R=0,J;const ue=8,me=64;for(J=0;J<ue;++J){E=u[R],$=u[R+1],j=u[R+2],V=u[R+3],Y=u[R+4],X=u[R+5],ae=u[R+6],ee=u[R+7];var oe=E+ee,te=E-ee,ge=$+ae,ce=$-ae,se=j+X,de=j-X,fe=V+Y,Pe=V-Y,xe=oe+fe,Ie=oe-fe,_e=ge+se,De=ge-se;u[R]=xe+_e,u[R+4]=xe-_e;var je=(De+Ie)*.707106781;u[R+2]=Ie+je,u[R+6]=Ie-je,xe=Pe+de,_e=de+ce,De=ce+te;var He=(xe-De)*.382683433,ze=.5411961*xe+He,We=1.306562965*De+He,qe=_e*.707106781,Ve=te+qe,Xe=te-qe;u[R+5]=Xe+ze,u[R+3]=Xe-ze,u[R+1]=Ve+We,u[R+7]=Ve-We,R+=8}for(R=0,J=0;J<ue;++J){E=u[R],$=u[R+8],j=u[R+16],V=u[R+24],Y=u[R+32],X=u[R+40],ae=u[R+48],ee=u[R+56];var Ke=E+ee,Be=E-ee,Ye=$+ae,Qe=$-ae,Je=j+X,Ze=j-X,et=V+Y,Ot=V-Y,Re=Ke+et,Ee=Ke-et,Fe=Ye+Je,Ue=Ye-Je;u[R]=Re+Fe,u[R+32]=Re-Fe;var tt=(Ue+Ee)*.707106781;u[R+16]=Ee+tt,u[R+48]=Ee-tt,Re=Ot+Ze,Fe=Ze+Qe,Ue=Qe+Be;var nt=(Re-Ue)*.382683433,rt=.5411961*Re+nt,at=1.306562965*Ue+nt,ot=Fe*.707106781,it=Be+ot,st=Be-ot;u[R+40]=st+rt,u[R+24]=st-rt,u[R+8]=it+at,u[R+56]=it-at,R++}var Te;for(J=0;J<me;++J)Te=u[J]*B[J],n[J]=Te>0?Te+.5|0:Te-.5|0;return n}function Ut(){re(65504),re(16),D(74),D(70),D(73),D(70),D(0),D(1),D(1),D(0),re(1),re(1),D(0),D(0)}function Tt(u,B){re(65472),re(17),D(8),re(B),re(u),D(3),D(1),D(17),D(0),D(2),D(17),D(1),D(3),D(17),D(1)}function kt(){re(65499),re(132),D(0);for(var u=0;u<64;u++)D(v[u]);D(1);for(var B=0;B<64;B++)D(g[B])}function Mt(){re(65476),re(418),D(0);for(var u=0;u<16;u++)D(d[u+1]);for(var B=0;B<=11;B++)D(F[B]);D(16);for(var E=0;E<16;E++)D(S[E+1]);for(var $=0;$<=161;$++)D(U[$]);D(1);for(var j=0;j<16;j++)D(z[j+1]);for(var V=0;V<=11;V++)D(T[V]);D(17);for(var Y=0;Y<16;Y++)D(pe[Y+1]);for(var X=0;X<=161;X++)D(b[X])}function Lt(){re(65498),re(12),D(3),D(1),D(0),D(2),D(17),D(3),D(17),D(0),D(63),D(0)}function Le(u,B,E,$,j){var V=j[0],Y=j[240],X;const ae=16,ee=63,R=64;for(var J=Ft(u,B),ue=0;ue<R;++ue)o[w[ue]]=J[ue];var me=o[0]-E;E=o[0],me==0?ve($[0]):(X=32767+me,ve($[a[X]]),ve(c[X]));for(var oe=63;oe>0&&o[oe]==0;oe--);if(oe==0)return ve(V),E;for(var te=1,ge;te<=oe;){for(var ce=te;o[te]==0&&te<=oe;++te);var se=te-ce;if(se>=ae){ge=se>>4;for(var de=1;de<=ge;++de)ve(Y);se=se&15}X=32767+o[te],ve(j[(se<<4)+a[X]]),ve(c[X]),te++}return oe!=ee&&ve(V),E}function Bt(){for(var u=String.fromCharCode,B=0;B<256;B++)e[B]=u(B)}this.encode=function(u,B,E){var $=new Date().getTime();B&&Ne(B),f=new Array,_=0,m=7,re(65496),Ut(),kt(),Tt(u.width,u.height),Mt(),Lt();var j=0,V=0,Y=0;_=0,m=7,this.encode.displayName="_encode_";for(var X=u.data,ae=u.width,ee=u.height,R=ae*4,J,ue=0,me,oe,te,ge,ce,se,de,fe;ue<ee;){for(J=0;J<R;){for(ge=R*ue+J,ce=ge,se=-1,de=0,fe=0;fe<64;fe++)de=fe>>3,se=(fe&7)*4,ce=ge+de*R+se,ue+de>=ee&&(ce-=R*(ue+1+de-ee)),J+se>=R&&(ce-=J+se-R+4),me=X[ce++],oe=X[ce++],te=X[ce++],h[fe]=(r[me]+r[oe+256>>0]+r[te+512>>0]>>16)-128,y[fe]=(r[me+768>>0]+r[oe+1024>>0]+r[te+1280>>0]>>16)-128,k[fe]=(r[me+1280>>0]+r[oe+1536>>0]+r[te+1792>>0]>>16)-128;j=Le(h,P,j,N,t),V=Le(y,C,V,l,s),Y=Le(k,C,Y,l,s),J+=32}ue+=8}if(m>=0){var Pe=[];Pe[1]=m+1,Pe[0]=(1<<m+1)-1,ve(Pe)}if(re(65497),E){for(var xe=f.length,Ie=new Uint8Array(xe),_e=0;_e<xe;_e++)Ie[_e]=f[_e].charCodeAt();return f=[],new Date().getTime()-$,Ie}var De="data:image/jpeg;base64,"+btoa(f.join(""));return f=[],new Date().getTime()-$,De};function Ne(u){if(u<=0&&(u=1),u>100&&(u=100),i!=u){var B=0;u<50?B=Math.floor(5e3/u):B=Math.floor(200-u*2),ie(B),i=u}}function Et(){var u=new Date().getTime();I||(I=50),Bt(),At(),Pt(),Rt(),Ne(I),new Date().getTime()-u}Et()}M.exports=p},function(M,x,p){p.p=C("lrz")+"/",window.URL=window.URL||window.webkitURL;var I=p(1),A=p(5),v=p(6),g=function(l){var t=/OS (.*) like Mac OS X/g.exec(l),s=/Android (\d.*?);/g.exec(l)||/Android\/(\d.*?) /g.exec(l),c=t?+t.pop().replace(/-/g,"."):0;return{oldIOS:t?c<8:!1,newIOS:t?c>=13:!1,oldAndroid:s?+s.pop().substr(0,3)<4.5:!1,iOS:/\(i[^;]+;( U;)? CPU.+Mac OS X/.test(l),android:/Android/g.test(l),mQQBrowser:/MQQBrowser/g.test(l)}}(navigator.userAgent);function P(l,t){var s=this;if(!l)throw new Error("\u6CA1\u6709\u6536\u5230\u56FE\u7247\uFF0C\u53EF\u80FD\u7684\u89E3\u51B3\u65B9\u6848\uFF1Ahttps://github.com/think2011/localResizeIMG/issues/7");t=t||{},s.defaults={width:null,height:null,fieldName:"file",ingnoreOrientation:g.iOS?g.newIOS:!0,quality:.7},s.file=l;for(var c in t)!t.hasOwnProperty(c)||(s.defaults[c]=t[c]);return this.init()}P.prototype.init=function(){var l=this,t=l.file,s=typeof t=="string",c=/^data:/.test(t),a=new Image,n=document.createElement("canvas"),o=s?t:URL.createObjectURL(t);if(l.img=a,l.blob=o,l.canvas=n,s?l.fileName=c?"base64.jpg":t.split("/").pop():l.fileName=t.name,!document.createElement("canvas").getContext)throw new Error("\u6D4F\u89C8\u5668\u4E0D\u652F\u6301canvas");return new I(function(f,_){a.onerror=function(){var m=new Error("\u52A0\u8F7D\u56FE\u7247\u6587\u4EF6\u5931\u8D25");throw _(m),m},a.onload=function(){l._getBase64().then(function(m){if(m.length<10){var h=new Error("\u751F\u6210base64\u5931\u8D25");throw _(h),h}return m}).then(function(m){var h=null;typeof l.file=="object"&&m.length>l.file.size?(h=new FormData,t=l.file):(h=new A.FormData,t=N(m)),h.append(l.defaults.fieldName,t,l.fileName.replace(/\..+/g,".jpg")),f({formData:h,fileLen:+t.size,base64:m,base64Len:m.length,origin:l.file,file:t});for(var y in l)!l.hasOwnProperty(y)||(l[y]=null);URL.revokeObjectURL(l.blob)})},!c&&(a.crossOrigin="*"),a.src=o})},P.prototype._getBase64=function(){var l=this,t=l.img,s=l.file,c=l.canvas;return new I(function(a){try{v.getData(typeof s=="object"?s:t,function(){l.orientation=l.defaults.ingnoreOrientation?0:v.getTag(this,"Orientation"),l.resize=l._getResize(),l.ctx=c.getContext("2d"),c.width=l.resize.width,c.height=l.resize.height,l.ctx.fillStyle="#fff",l.ctx.fillRect(0,0,c.width,c.height),g.oldIOS?l._createBase64ForOldIOS().then(a):l._createBase64().then(a)})}catch(n){throw new Error(n)}})},P.prototype._createBase64ForOldIOS=function(){var l=this,t=l.img,s=l.canvas,c=l.defaults,a=l.orientation;return new I(function(n){(function(){var o=[p(7)];(function(f){var _=new f(t);"5678".indexOf(a)>-1?_.render(s,{width:s.height,height:s.width,orientation:a}):_.render(s,{width:s.width,height:s.height,orientation:a}),n(s.toDataURL("image/jpeg",c.quality))}).apply(null,o)})()})},P.prototype._createBase64=function(){var l=this,t=l.resize,s=l.img,c=l.canvas,a=l.ctx,n=l.defaults,o=l.orientation;switch(o){case 3:a.rotate(180*Math.PI/180),a.drawImage(s,-t.width,-t.height,t.width,t.height);break;case 6:a.rotate(90*Math.PI/180),a.drawImage(s,0,-t.width,t.height,t.width);break;case 8:a.rotate(270*Math.PI/180),a.drawImage(s,-t.height,0,t.height,t.width);break;case 2:a.translate(t.width,0),a.scale(-1,1),a.drawImage(s,0,0,t.width,t.height);break;case 4:a.translate(t.width,0),a.scale(-1,1),a.rotate(180*Math.PI/180),a.drawImage(s,-t.width,-t.height,t.width,t.height);break;case 5:a.translate(t.width,0),a.scale(-1,1),a.rotate(90*Math.PI/180),a.drawImage(s,0,-t.width,t.height,t.width);break;case 7:a.translate(t.width,0),a.scale(-1,1),a.rotate(270*Math.PI/180),a.drawImage(s,-t.height,0,t.height,t.width);break;default:a.drawImage(s,0,0,t.width,t.height)}return new I(function(f){g.oldAndroid||g.mQQBrowser||!navigator.userAgent?function(){var _=[p(8)];(function(m){var h=new m,y=a.getImageData(0,0,c.width,c.height);f(h.encode(y,n.quality*100))}).apply(null,_)}():f(c.toDataURL("image/jpeg",n.quality))})},P.prototype._getResize=function(){var l=this,t=l.img,s=l.defaults,c=s.width,a=s.height,n=l.orientation,o={width:t.width,height:t.height};if("5678".indexOf(n)>-1&&(o.width=t.height,o.height=t.width),o.width<c||o.height<a)return o;var f=o.width/o.height;for(c&&a?f>=c/a?o.width>c&&(o.width=c,o.height=Math.ceil(c/f)):o.height>a&&(o.height=a,o.width=Math.ceil(a*f)):c?c<o.width&&(o.width=c,o.height=Math.ceil(c/f)):a&&a<o.height&&(o.width=Math.ceil(a*f),o.height=a);o.width>=3264||o.height>=2448;)o.width*=.8,o.height*=.8;return o};function C(l){var t=null;return l?t=[].filter.call(document.scripts,function(s){return s.src.indexOf(l)!==-1})[0]:t=document.scripts[document.scripts.length-1],t?t.src.substr(0,t.src.lastIndexOf("/")):null}function N(l){var t;l.split(",")[0].indexOf("base64")>=0?t=atob(l.split(",")[1]):t=unescape(l.split(",")[1]);for(var s=l.split(",")[0].split(":")[1].split(";")[0],c=new Uint8Array(t.length),a=0;a<t.length;a++)c[a]=t.charCodeAt(a);return new A.Blob([c.buffer],{type:s})}window.lrz=function(l,t){return new P(l,t)},window.lrz.version="__packageJSON.version__",M.exports=window.lrz}])})})(It);var gn=It.exports,ke,_n=new Uint8Array(16);function wn(){if(!ke&&(ke=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!ke))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ke(_n)}var xn=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function yn(G){return typeof G=="string"&&xn.test(G)}var ne=[];for(var Oe=0;Oe<256;++Oe)ne.push((Oe+256).toString(16).substr(1));function Sn(G){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,M=(ne[G[W+0]]+ne[G[W+1]]+ne[G[W+2]]+ne[G[W+3]]+"-"+ne[G[W+4]]+ne[G[W+5]]+"-"+ne[G[W+6]]+ne[G[W+7]]+"-"+ne[G[W+8]]+ne[G[W+9]]+"-"+ne[G[W+10]]+ne[G[W+11]]+ne[G[W+12]]+ne[G[W+13]]+ne[G[W+14]]+ne[G[W+15]]).toLowerCase();if(!yn(M))throw TypeError("Stringified UUID is invalid");return M}function bn(G,W,M){G=G||{};var x=G.random||(G.rng||wn)();if(x[6]=x[6]&15|64,x[8]=x[8]&63|128,W){M=M||0;for(var p=0;p<16;++p)W[M+p]=x[p];return W}return Sn(x)}const Dt=$t("imgBed",{state:()=>({uploadImgList:[]}),actions:{setUploadImgList(G){this.uploadImgList.push(G)},updateImgList(G,W){this.updateImgList[W]=G}},persist:{key:"PICR_IMGLIST",paths:["uploadImgList"],storage:localStorage}});const Cn={class:"upload-page-container"},In={class:"imgList"},Dn=Q(" \u5220\u9664 "),An=Q(" \u91CD\u547D\u540D "),Pn=Q(" \u5C5E\u6027 "),Rn={class:"filename"},Fn={class:"rename__input"},Un={class:"copy-external-link-box"},Tn={class:"markdown__icon-box"},kn=Q(" \u70B9\u51FB\u8F6C\u6362markdown\u683C\u5F0F\u5916\u94FE "),Mn={class:"copy__btn--box"},Ln=Q(" \u70B9\u51FB\u590D\u5236GitHub\u5916\u94FE "),Bn=["onClick"],En=Q(" \u70B9\u51FB\u590D\u5236CDN\u5916\u94FE "),On=["onClick"],Gn=Q(" \u56FE\u7247\u540D\u79F0\uFF1A"),$n=Q(" \u56FE\u7247\u5927\u5C0F\uFF1A"),Nn={setup(G){const W=Dt(),M=bt(),{config:x}=Me(M),p=we(-1),I=we([]),A=we(!1),v=we([]),{uploadImgList:g}=Me(W),P=a=>{g.value[a].isMarkdown=!g.value[a].isMarkdown},C=(a="github",n)=>{yt(a,g.value[n])},N=({key:a})=>{let[n,o]=a.split("-");switch(n){case"delete":let[f]=g.value.splice(o,1);be.success({content:`${Ce(f)}\u6587\u4EF6\u5220\u9664\u6210\u529F`});break;case"rename":p.value=Number(o),Nt(()=>{I.value[Number(o)].focus()});break;case"attribute":A.value=!0;break}},l=a=>v.value[a],t=(a,n)=>{v.value[a]=n},s=a=>{let n=Ce(g.value[a],!0);lt.confirm({title:"\u91CD\u547D\u540D\u63D0\u793A",icon:H(jt),content:`\u786E\u8BA4\u91CD\u547D\u540D\u4E3A${n}?`,okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",confirmLoading:!0,onOk:async()=>{try{let o=await Ct({login:x.value.login,repo:x.value.selectedRepos,branch:x.value.selectedBranch,dirs:x.value.dirMode===4?x.value.selectedDirList.join("/"):x.value.selectedDir,filename:n,message:`\u66F4\u65B0\u4E86${n}\u6587\u4EF6\uFF0C\u6765\u6E90\u4E8E${location.origin+location.pathname}`,content:g.value[a].compressFile.base64.split(",")[1],sha:g.value[a].sha});be.success({content:`\u66F4\u65B0${n}\u6210\u529F`}),g.value[a].sha=o.content.sha,g.value[a].filePrefixName=g.value[a].rename,g.value[a].githubUrl=ut.join(dn,`/${x.value.login}/${x.value.selectedRepos}/${x.value.selectedBranch}/${x.value.dirMode===4?x.value.selectedDirList.join("/"):x.value.selectedDir}/${n}`),g.value[a].jsdelivrUrl=ut.join(fn,`/${x.value.login}/${x.value.selectedRepos}@${x.value.selectedBranch}/${x.value.dirMode===4?x.value.selectedDirList.join("/"):x.value.selectedDir}/${n}`),W.updateImgList(g.value[a],a)}catch(o){be.error({content:o.message})}finally{p.value=-1}},onCancel:()=>{p.value=-1}})},c=a=>{I.value.push(a)};return(a,n)=>{const o=Ht,f=zt,_=Wt,m=mt,h=gt,y=_t,k=lt,e=qt;return Z(),ye("div",Cn,[L("ul",In,[H(e,null,{default:O(()=>[(Z(!0),ye(ht,null,pt(q(g),(r,i)=>(Z(),ye("li",{class:"imgItem",key:r.id},[L("div",{class:"more",ref_for:!0,ref:t.bind(null,i)},[H(_,{getPopupContainer:l.bind(null,i),trigger:"click",class:"more__btn",onClick:a.handleButtonClick},{overlay:O(()=>[H(f,{onClick:N},{default:O(()=>[(Z(),he(o,{key:`delete-${i}`},{default:O(()=>[Dn]),_:2},1024)),(Z(),he(o,{key:`rename-${i}`},{default:O(()=>[An]),_:2},1024)),(Z(),he(o,{key:`attribute-${i}`},{default:O(()=>[Pn]),_:2},1024))]),_:2},1024)]),_:2},1032,["getPopupContainer","onClick"])],512),H(m,{class:"img",src:r.compressFile.base64},null,8,["src"]),p.value!==i?(Z(),he(h,{key:0},{title:O(()=>[Q(le(q(Ce)(r)),1)]),default:O(()=>[L("div",Rn,le(q(Ce)(r)),1)]),_:2},1024)):Ae("",!0),Ge(L("div",Fn,[H(y,{ref_for:!0,ref:c,onBlur:w=>s(i),value:r.rename,"onUpdate:value":w=>r.rename=w,placeholder:"\u8BF7\u8F93\u5165\u65B0\u7684\u540D\u5B57"},null,8,["onBlur","value","onUpdate:value"])],512),[[$e,p.value===i]]),L("div",Un,[L("div",Tn,[H(h,null,{title:O(()=>[kn]),default:O(()=>[H(q(vt),{onClick:Se(w=>P(i),["stop"]),class:"markdown__icon",component:r.isMarkdown?q(xt):q(wt)},null,8,["onClick","component"])]),_:2},1024)]),L("div",Mn,[H(h,null,{title:O(()=>[Ln]),default:O(()=>[L("span",{onClick:Se(w=>C("github",i),["stop"]),class:"copy__btn"},"GitHub",8,Bn)]),_:2},1024),H(h,null,{title:O(()=>[En]),default:O(()=>[L("span",{onClick:Se(w=>C("cdn",i),["stop"]),class:"copy__btn"},"CDN",8,On)]),_:2},1024)])]),H(k,{centered:"",footer:null,visible:A.value,"onUpdate:visible":n[0]||(n[0]=w=>A.value=w),title:"\u56FE\u7247\u5C5E\u6027"},{default:O(()=>[L("div",null,[Gn,L("strong",null,le(q(Ce)(q(g)[i])),1)]),L("div",null,[$n,L("strong",null,le(q(cn)(q(g)[i].compressFile.fileLen))+" KB",1)])]),_:2},1032,["visible"])]))),128))]),_:1})])])}}};var jn=St(Nn,[["__scopeId","data-v-b607be64"]]);const Hn=G=>(Kt("data-v-27b0c35a"),G=G(),Yt(),G),zn={class:"ant-upload-drag-icon"},Wn=Hn(()=>L("p",{class:"ant-upload-text"},"\u62D6\u62FD\u3001\u7C98\u8D34\u3001\u6216\u8005\u70B9\u51FB\u6B64\u5904\u4E0A\u4F20",-1)),qn={class:"repo__container"},Vn={key:0},Xn=Q(" \u4ED3\u5E93: "),Kn=Q(" \u5206\u652F: "),Yn=Q(" \u76EE\u5F55: "),Qn={key:1,class:"upload__count"},Jn={key:0,class:"upload__list"},Zn={class:"list__wrap"},er={class:"right__info"},tr={class:"top"},nr={class:"filename"},rr={class:"img__info"},ar={class:"bottom"},or={class:"rename-box"},ir={class:"hash__rename"},sr=Q("\u54C8\u5E0C\u5316"),lr=Q("\u91CD\u547D\u540D"),ur={class:"copy-external-link-box"},cr={class:"markdown__icon-box"},dr=Q(" \u70B9\u51FB\u8F6C\u6362markdown\u683C\u5F0F\u5916\u94FE "),fr={class:"copy__btn--box"},hr=Q(" \u70B9\u51FB\u590D\u5236GitHub\u5916\u94FE "),pr=["onClick"],vr=Q(" \u70B9\u51FB\u590D\u5236CDN\u5916\u94FE "),mr=["onClick"],gr=Q("\u91CD\u7F6E"),_r=Q("\u4E0A\u4F20"),wr={setup(G){const W=bt(),M=we(!1),x=we(0),{config:p}=Me(W),I=we(null),A=we(!1),v=we([]),g=Dt(),{uploadImgList:P}=Me(g),C=()=>p.value.dirMode===4?p.value.selectedDirList.join("/"):p.value.selectedDir,N=async({file:h})=>{try{A.value=!0;let y=pn(h.name),k=ft(h.name);const e=await gn(h);if(e.fileLen>1024*1024*5||h.size>1024*1024*5){be.warning({content:"\u6587\u4EF6\u4E0D\u80FD\u8D85\u8FC75M"});return}v.value.push({id:bn(),isHash:!0,isRename:!1,rename:y,fileSubfixName:k,filePrefixName:y,uploadDate:Date.now(),isUpload:"no",compressFile:e,isMarkdown:!1,githubUrl:"",jsdelivrUrl:""})}catch(y){console.log(y)}finally{A.value=!1}},l=()=>{v.value=[]},t=async()=>{if(x.value===v.value.length){be.info({content:"\u5DF2\u5168\u90E8\u4E0A\u4E0A\u4F20\u6210\u529F\uFF0C\u65E0\u9700\u91CD\u590D\u4E0A\u4F20"});return}M.value=!0;for(let h=0;h<v.value.length;h++){if(v.value[h].isUpload==="yes")continue;let y=Ce(v.value[h]);try{v.value[h].isUpload="loading";let k=await Ct({login:p.value.login,repo:p.value.selectedRepos,branch:p.value.selectedBranch,dirs:p.value.dirMode===4?p.value.selectedDirList.join("/"):p.value.selectedDir,filename:y,message:`\u4E0A\u4F20\u4E86${y}\u6587\u4EF6\uFF0C\u6765\u6E90\u4E8E${location.origin+location.pathname}`,content:v.value[h].compressFile.base64.split(",")[1]});be.success({content:`${y}\u6587\u4EF6\u4E0A\u4F20\u6210\u529F`}),v.value[h].sha=k.content.sha,v.value[h].isUpload="yes",v.value[h].githubUrl=vn(y),v.value[h].jsdelivrUrl=mn(y),x.value++,g.setUploadImgList(v.value[h])}catch{}}M.value=!1},s=h=>{v.value.splice(h,1)},c=h=>{v.value[h].filePrefixName=v.value[h].rename,v.value[h].isRename=!1},a=h=>{v.value[h].isMarkdown=!v.value[h].isMarkdown},n=(h="github",y)=>{yt(h,v.value[y])},o=h=>{h.fileSubfixName=ft(h.compressFile.origin.name,h.isHash)},f=h=>{},_=h=>{h.isRename=!1},m=h=>{const y=(h.clipboardData||window.clipboardData).items;let k=null;if(!y||y.length===0){be.error({content:"\u5F53\u524D\u6D4F\u89C8\u5668\u4E0D\u652F\u6301\u672C\u5730"});return}for(let e=0;e<y.length;e++)if(y[e].type.indexOf("image")!==-1){k=y[e].getAsFile();break}if(!k){be.error({content:"\u7C98\u8D34\u5185\u5BB9\u975E\u56FE\u7247"});return}I.value.customRequest({file:k})};return(h,y)=>{const k=Qt,e=Jt,r=Zt,i=mt,w=gt,d=ln,F=_t,S=en,U=tn,z=nn,T=rn,pe=Vt;return Z(),he(pe,{onPaste:m,class:"container"},{default:O(()=>[q(P).length?(Z(),he(jn,{key:0})):Ae("",!0),L("div",{class:ct([{"page-upload-right":q(P).length},"wrapper"])},[H(e,{spinning:A.value,tip:"\u6B63\u5728\u538B\u7F29\u4E2D"},{default:O(()=>[H(k,{beforeUpload:h.handleBeforeUpload,accept:q(hn),ref_key:"uploadRef",ref:I,name:"file",multiple:!0,customRequest:N,showUploadList:!1},{default:O(()=>[L("p",zn,[H(q(Xt))]),Wn]),_:1},8,["beforeUpload","accept"])]),_:1},8,["spinning"]),L("div",qn,[q(p).id?(Z(),ye("div",Vn,[L("span",null,[Xn,H(r,{color:"blue"},{default:O(()=>[Q(le(q(p).selectedRepos),1)]),_:1})]),L("span",null,[Kn,H(r,{color:"blue"},{default:O(()=>[Q(le(q(p).selectedBranch),1)]),_:1})]),L("span",null,[Yn,H(r,{color:"blue"},{default:O(()=>[Q(le(C()),1)]),_:1})])])):Ae("",!0),v.value.length?(Z(),ye("div",Qn," \u5DF2\u4E0A\u4F20 "+le(x.value)+" / "+le(v.value.length),1)):Ae("",!0)]),v.value.length?(Z(),ye("div",Jn,[L("ul",Zn,[(Z(!0),ye(ht,null,pt(v.value,(b,ie)=>(Z(),ye("li",{key:b.id,class:"upload__list-item"},[L("div",{class:ct(["upload__icon",{success:b.isUpload}])},[b.isUpload==="no"?(Z(),he(q(an),{key:0,rotate:"-45",style:{color:"white"}})):b.isUpload==="loading"?(Z(),he(q(on),{key:1})):(Z(),he(q(sn),{key:2,rotate:"-45"}))],2),H(i,{class:"img__box",src:b.compressFile.base64},null,8,["src"]),L("div",er,[L("div",tr,[H(w,null,{title:O(()=>[Q(le(q(Ce)(b)),1)]),default:O(()=>[L("span",nr,le(q(Ce)(b)),1)]),_:2},1024),L("div",rr,[L("span",null,[L("del",null,le(b.compressFile.origin.size)+"KB",1)]),L("span",null,le(b.compressFile.fileLen)+"KB",1),L("span",null,le(q(un)(b.uploadDate,"YYYY-MM-DD HH:mm:ss").value),1)])]),L("div",ar,[Ge(L("div",or,[L("div",ir,[H(d,{onChange:K=>o(b),checked:b.isHash,"onUpdate:checked":K=>b.isHash=K},{default:O(()=>[sr]),_:2},1032,["onChange","checked","onUpdate:checked"]),H(d,{onChange:K=>f(),checked:b.isRename,"onUpdate:checked":K=>b.isRename=K},{default:O(()=>[lr]),_:2},1032,["onChange","checked","onUpdate:checked"]),b.isRename?(Z(),he(F,{key:0,size:"small",style:{"max-width":"240px"},"allow-clear":"",onBlur:K=>c(ie),value:b.rename,"onUpdate:value":K=>b.rename=K,placeholder:"\u8BF7\u8F93\u5165\u91CD\u65B0\u4FEE\u6539\u7684\u6587\u4EF6\u540D"},{addonAfter:O(()=>[H(q(dt),{onClick:Se(K=>_(b),["stop"])},null,8,["onClick"])]),_:2},1032,["onBlur","value","onUpdate:value"])):Ae("",!0)]),L("div",null,[H(q(dt),{class:"close__icon",onClick:Se(K=>s(ie),["stop"])},null,8,["onClick"])])],512),[[$e,b.isUpload==="no"]]),Ge(L("div",ur,[L("div",cr,[H(w,null,{title:O(()=>[dr]),default:O(()=>[H(q(vt),{onClick:Se(K=>a(ie),["stop"]),class:"markdown__icon",component:b.isMarkdown?q(xt):q(wt)},null,8,["onClick","component"])]),_:2},1024)]),L("div",fr,[H(w,null,{title:O(()=>[hr]),default:O(()=>[L("span",{onClick:Se(K=>n("github",ie),["stop"]),class:"copy__btn"},"GitHub",8,pr)]),_:2},1024),H(w,null,{title:O(()=>[vr]),default:O(()=>[L("span",{onClick:Se(K=>n("cdn",ie),["stop"]),class:"copy__btn"},"CDN",8,mr)]),_:2},1024)])],512),[[$e,b.isUpload==="yes"]])])])]))),128))])])):Ae("",!0),H(T,{justify:"end"},{default:O(()=>[H(z,{span:4},{default:O(()=>[H(U,{class:"btns-box"},{default:O(()=>[H(S,{onClick:l},{default:O(()=>[gr]),_:1}),H(S,{loading:M.value,onClick:t,type:"primary"},{default:O(()=>[_r]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})],2)]),_:1})}}};var Ir=St(wr,[["__scopeId","data-v-27b0c35a"]]);export{Ir as default};
