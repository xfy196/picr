var H=Object.defineProperty;var L=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var I=(e,t,o)=>t in e?H(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,v=(e,t)=>{for(var o in t||(t={}))V.call(t,o)&&I(e,o,t[o]);if(L)for(var o of L(t))j.call(t,o)&&I(e,o,t[o]);return e};import{o as i,c as u,r as B,u as T,w as r,a as l,b as d,K as F,S as E,T as O,d as P,e as g,L as G,$ as W,f as y,g as A,h as J,i as k,j as Q,k as h,t as D,F as X,_ as q,M as z,l as Y,m as Z,n as ee,p as te,q as oe,s as se,v as ne,x as re,y as ae,z as ce,A as ie,B as R,U as le,C as ue,D as _e,E as de,G as pe,H as me,I as he,J as fe,N as ge,O as ve,P as ye,Q as ke,R as $e,V as be}from"./vendor.f69038fa.js";const Se=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function o(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerpolicy&&(a.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?a.credentials="include":n.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(n){if(n.ep)return;n.ep=!0;const a=o(n);fetch(n.href,a)}};Se();var C=(e,t)=>{const o=e.__vccOpts||e;for(const[s,n]of t)o[s]=n;return o};const we={};function xe(e,t){const o=B("router-view");return i(),u(o)}var Ce=C(we,[["render",xe]]);const Le="modulepreload",U={},Ie="/picr/",x=function(t,o){return!o||o.length===0?t():Promise.all(o.map(s=>{if(s=`${Ie}${s}`,s in U)return;U[s]=!0;const n=s.endsWith(".css"),a=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${a}`))return;const c=document.createElement("link");if(c.rel=n?"stylesheet":Le,n||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),n)return new Promise((_,m)=>{c.addEventListener("load",_),c.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t())};const Ee=g("Loading ..."),Oe=g("Loading ..."),Pe={setup(e){const t=T();return(o,s)=>{const n=B("router-view"),a=G;return i(),u(a,{class:"layout__container"},{default:r(()=>[l(n,null,{default:r(({Component:c})=>[d(t).meta.keepAlive?(i(),u(F,{key:0},[(i(),u(E,null,{default:r(()=>[l(O,{name:"fade"},{default:r(()=>[(i(),u(P(c),{key:d(t).name}))]),_:2},1024)]),fallback:r(()=>[Ee]),_:2},1024))],1024)):(i(),u(E,{key:1},{default:r(()=>[l(O,{name:"fade"},{default:r(()=>[(i(),u(P(c),{key:d(t).name}))]),_:2},1024)]),fallback:r(()=>[Oe]),_:2},1024))]),_:1})]),_:1})}}};var Re=C(Pe,[["__scopeId","data-v-c8ae4a88"]]);const Ue=e=>{const{icon:t}=e;return l(W[t])},Be={setup(e){const t=y(!1),o=T(),s=A(),n=y([]);let a=s.getRoutes();a=a.filter(_=>_.path!=="/"),J(()=>o.path,_=>{n.value=[_]},{immediate:!0});const c=_=>{s.push(_.key)};return(_,m)=>{const b=q,S=z,w=Y;return i(),u(w,{theme:"light",collapsed:t.value,"onUpdate:collapsed":m[1]||(m[1]=p=>t.value=p),collapsible:""},{default:r(()=>[l(S,{selectedKeys:n.value,"onUpdate:selectedKeys":m[0]||(m[0]=p=>n.value=p),mode:"inline",theme:"light",onClick:c,"inline-collapsed":t.value},{default:r(()=>[(i(!0),k(X,null,Q(d(a),p=>(i(),u(b,{key:p.path},{icon:r(()=>[l(d(Ue),{icon:p.meta.icon},null,8,["icon"])]),default:r(()=>[h("span",null,D(p.meta.title),1)]),_:2},1024))),128))]),_:1},8,["selectedKeys","inline-collapsed"])]),_:1},8,["collapsed"])}}};var Te="/picr/assets/logo.6bb51d52.png";const f=Z.create({timeout:1e3*10,baseURL:"https://api.github.com"});f.interceptors.request.use(e=>{const t=N(),o=localStorage.getItem("GITHUB__TOKEN")||t.config.token;return o&&(e.headers.Authorization=`token ${o}`),e},e=>Promise.error(e));f.interceptors.response.use(e=>e.status>=200&&e.status<300?Promise.resolve(e.data):Promise.reject(e.data),e=>{let t=e.response.data;return ee.error(t.message),Promise.reject(t)});const Ae=async()=>f({url:"/user"}),De=e=>f({url:`/users/${e.login}/repos`}),qe=e=>f({url:`/repos/${e.login}/${e.repo}/branches`}),ze=async e=>f({url:`/repos/${e.login}/${e.repo}/contents/${e.dir}`,params:e.query}),ct=async e=>f({url:te.join(`/repos/${e.login}/${e.repo}/contents/${e.dirs}/${e.filename}`),method:"PUT",data:{branch:e.branch,message:e.message,content:e.content}}),N=oe("user",{state:()=>({config:{id:null,token:"",login:"",name:"",avatarUrl:"",selectedDir:"xxx",selectedDirList:[],selectedRepos:"",dirMode:1,selectedBranch:""},repos:[],branches:[],contents:[]}),actions:{async getUser(e){localStorage.setItem("GITHUB__TOKEN",e);try{let t=await Ae();this.config.id=t.id,this.config.avatarUrl=t.avatar_url,this.config.login=t.login,this.config.name=t.name,this.config.token=e}catch{}},async logout(){localStorage.clear(),location.reload()},updateConfig(e){this.config=v(v({},this.config),e)},async getRepos(){try{let e=await De({login:this.config.login});this.repos=e}catch{}},async getBranches(e){try{let t=await qe({login:this.config.login,repo:e});this.branches=t}catch{}},async getBranchCatalogue(e){try{let t=await ze(v({login:this.config.login},e));return this.contents=t,t}catch{}}},getters:{imageContents:e=>e.contents.filter(t=>t.type==="dir"||se.getType(t.name).startsWith("image")).map(t=>(t.isMarkdown=!1,t))},persist:{key:"PICR_CONFIG",paths:["config"],storage:localStorage}}),Ne=g(" \u7D2F\u8BA1\u8BBF\u95EE\u6570: "),Ke=h("span",{id:"busuanzi_value_site_uv",class:"uv"},null,-1),Me=g(" \u6D4F\u89C8\u6B21\u6570: "),He=h("span",{id:"busuanzi_value_site_pv",class:"pv"},null,-1),Ve=[Ne,Ke,Me,He],je={setup(e){const t=y(null),o=y(!1);return ne(()=>{const s=document.createElement("script");s.async=!0,s.src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",t.value.appendChild(s),s.onload=function(){re(()=>{o.value=!0})}}),(s,n)=>ae((i(),k("div",{class:"site-count",ref_key:"siteCountDom",ref:t},Ve,512)),[[ce,o.value]])}};const K=e=>(ue("data-v-4dcb15f1"),e=e(),_e(),e),Fe={class:"header__left"},Ge=K(()=>h("img",{src:Te,class:"logo",alt:""},null,-1)),We=[Ge],Je=K(()=>h("h2",{class:"logo__txt"},"PicR",-1)),Qe={class:"login__box"},Xe={key:0,class:"no__login--text"},Ye={key:1,class:"userinfo"},Ze=g("\u9000\u51FA\u767B\u5F55"),et={setup(e){const t=N(),o=A(),{config:s}=ie(t),n=()=>{t.logout()};return(a,c)=>{const _=de,m=pe,b=q,S=z,w=me,p=he;return i(),u(p,{class:"header"},{default:r(()=>[h("div",Fe,[h("h1",{onClick:c[0]||(c[0]=R(nt=>d(o).push("/"),["stop"]))},We),Je,l(je)]),h("div",Qe,[d(s).id?(i(),k("span",Ye,D(d(s).login),1)):(i(),k("span",Xe,"\u672A\u767B\u5F55")),d(s).id?(i(),u(w,{key:3},{overlay:r(()=>[l(S,null,{default:r(()=>[l(b,null,{default:r(()=>[l(m,{onClick:R(n,["stop"]),type:"link"},{default:r(()=>[Ze]),_:1},8,["onClick"])]),_:1})]),_:1})]),default:r(()=>[l(_,{src:d(s).avatarUrl,size:48},null,8,["src"])]),_:1})):(i(),u(_,{key:2,size:48},{icon:r(()=>[l(d(le))]),_:1}))])]),_:1})}}};var tt=C(et,[["__scopeId","data-v-4dcb15f1"]]);const ot={setup(e){return(t,o)=>{const s=fe;return i(),u(s,{style:{"min-height":"100vh"}},{default:r(()=>[l(tt),l(s,null,{default:r(()=>[l(Be),l(Re)]),_:1})]),_:1})}}},st=ge({history:ve(),routes:[{path:"/",component:ot,redirect:"/upload",children:[{path:"/setting",component:()=>x(()=>import("./setting.42dbc926.js"),["assets/setting.42dbc926.js","assets/setting.e340eaeb.css","assets/index.1a044952.css","assets/vendor.f69038fa.js","assets/vendor.6ca50818.css","assets/index.f3bbd6c6.js","assets/index.00abad04.css"]),meta:{title:"\u56FE\u5E8A\u914D\u7F6E",icon:"SettingOutlined"}},{path:"/upload",component:()=>x(()=>import("./upload.d40fb3aa.js"),["assets/upload.d40fb3aa.js","assets/upload.acdd38cf.css","assets/index.1a044952.css","assets/vendor.f69038fa.js","assets/vendor.6ca50818.css","assets/index.f3bbd6c6.js","assets/index.00abad04.css","assets/useCopExternalLinks.353b1f83.js","assets/useCopExternalLinks.f4468f31.css"]),meta:{title:"\u56FE\u7247\u4E0A\u4F20",icon:"EditOutlined"}},{path:"/bedmanager",component:()=>x(()=>import("./bedmanager.6bab0ab5.js"),["assets/bedmanager.6bab0ab5.js","assets/bedmanager.e88bfe6c.css","assets/vendor.f69038fa.js","assets/vendor.6ca50818.css","assets/useCopExternalLinks.353b1f83.js","assets/useCopExternalLinks.f4468f31.css","assets/index.f3bbd6c6.js","assets/index.00abad04.css"]),meta:{title:"\u56FE\u5E8A\u7BA1\u7406",icon:"SettingOutlined"}}]}]});const M=ye();M.use(ke);const $=$e(Ce);$.use(st);$.use(M);$.use(be);$.mount("#app");export{C as _,ct as r,N as u};
