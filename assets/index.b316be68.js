var V=Object.defineProperty,j=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var x=(e,t,o)=>t in e?V(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,f=(e,t)=>{for(var o in t||(t={}))G.call(t,o)&&x(e,o,t[o]);if(b)for(var o of b(t))W.call(t,o)&&x(e,o,t[o]);return e},I=(e,t)=>j(e,F(t));import{o as c,c as u,r as U,u as A,w as i,a as l,b as p,K as J,S as O,d as R,e as y,L as Q,$ as X,f as k,g as B,h as Y,i as $,j as Z,k as m,t as M,F as ee,_ as q,M as H,l as te,m as oe,n as se,p as L,q as ne,s as re,v as ae,x as ie,y as ce,z as le,A as ue,B as D,U as _e,C as pe,D as de,E as he,G as me,H as ge,I as fe,J as ve,N as ye,O as ke,P as $e,Q as Pe,R as we,T as Se}from"./vendor.4554e321.js";const Ee=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function o(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=o(n);fetch(n.href,r)}};Ee();var C=(e,t)=>{const o=e.__vccOpts||e;for(const[s,n]of t)o[s]=n;return o};const Le={};function Ce(e,t){const o=U("router-view");return c(),u(o)}var be=C(Le,[["render",Ce]]);const xe="modulepreload",T={},Ie="/picr/",v=function(t,o){return!o||o.length===0?t():Promise.all(o.map(s=>{if(s=`${Ie}${s}`,s in T)return;T[s]=!0;const n=s.endsWith(".css"),r=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${r}`))return;const a=document.createElement("link");if(a.rel=n?"stylesheet":xe,n||(a.as="script",a.crossOrigin=""),a.href=s,document.head.appendChild(a),n)return new Promise((_,h)=>{a.addEventListener("load",_),a.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t())};const Oe=y("Loading ..."),Re=y("Loading ..."),De={setup(e){const t=A();return(o,s)=>{const n=U("router-view"),r=Q;return c(),u(r,{class:"layout__container"},{default:i(()=>[l(n,null,{default:i(({Component:a})=>[p(t).meta.keepAlive?(c(),u(J,{key:0},[(c(),u(O,null,{default:i(()=>[(c(),u(R(a),{key:p(t).path}))]),fallback:i(()=>[Oe]),_:2},1024))],1024)):(c(),u(O,{key:1},{default:i(()=>[(c(),u(R(a),{key:p(t).path}))]),fallback:i(()=>[Re]),_:2},1024))]),_:1})]),_:1})}}};var Te=C(De,[["__scopeId","data-v-7fbb0e0a"]]);const Ue=e=>{const{icon:t}=e;return l(X[t])},Ae={setup(e){const t=k(!1),o=A(),s=B(),n=k([]);let r=s.getRoutes();r=r.filter(_=>_.path!=="/"),Y(()=>o.path,_=>{n.value=[_]},{immediate:!0});const a=_=>{s.push(_.key)};return(_,h)=>{const w=q,S=H,E=te;return c(),u(E,{theme:"light",collapsed:t.value,"onUpdate:collapsed":h[1]||(h[1]=d=>t.value=d),collapsible:""},{default:i(()=>[l(S,{selectedKeys:n.value,"onUpdate:selectedKeys":h[0]||(h[0]=d=>n.value=d),mode:"inline",theme:"light",onClick:a,"inline-collapsed":t.value},{default:i(()=>[(c(!0),$(ee,null,Z(p(r),d=>(c(),u(w,{key:d.path},{icon:i(()=>[l(p(Ue),{icon:d.meta.icon},null,8,["icon"])]),default:i(()=>[m("span",null,M(d.meta.title),1)]),_:2},1024))),128))]),_:1},8,["selectedKeys","inline-collapsed"])]),_:1},8,["collapsed"])}}};var Be="/picr/assets/logo.6bb51d52.png";const g=oe.create({timeout:1e3*10,baseURL:"https://api.github.com"});g.interceptors.request.use(e=>{const t=z(),o=localStorage.getItem("GITHUB__TOKEN")||t.config.token;return o&&(e.headers.Authorization=`token ${o}`),e.params=I(f({},e.params),{_t:Date.now()}),e},e=>Promise.error(e));g.interceptors.response.use(e=>e.status>=200&&e.status<300?Promise.resolve(e.data):Promise.reject(e.data),e=>{let t=e.response.data;return se.error(t.message),Promise.reject(t)});const Me=async()=>g({url:"/user"}),qe=e=>g({url:`/users/${e.login}/repos`,params:{page:e.page,per_page:e.prePage}}),He=e=>g({url:`/repos/${e.login}/${e.repo}/branches`}),ze=async e=>g({url:L.join(`/repos/${e.login}/${e.repo}/contents/${e.dir}`),params:e.query}),lt=async e=>g({url:L.join(`/repos/${e.login}/${e.repo}/contents/${e.dirs}/${e.filename}`),method:"PUT",data:{branch:e.branch,message:e.message,content:e.content}}),ut=async e=>g({url:L.join(`/repos/${e.login}/${e.repo}/contents/${e.dirs}/${e.filename}`),data:e.data,method:"DELETE"}),z=ne("user",{state:()=>({config:{id:null,token:"",login:"",name:"",avatarUrl:"",selectedDir:"xxx",selectedDirList:[],selectedRepo:"",dirMode:1,selectedBranch:""},repos:[],repoPage:1,repoPrePage:100,repoHasMore:!0,branches:[],contents:[],setting:{isHash:!1,isMarkdown:!1,compressValue:.7}}),actions:{setRepoPage(e){this.repoPage=e},async getUser(e){localStorage.setItem("GITHUB__TOKEN",e);try{let t=await Me();this.config.id=t.id,this.config.avatarUrl=t.avatar_url,this.config.login=t.login,this.config.name=t.name,this.config.token=e}catch{}},async logout(){localStorage.clear(),location.reload()},updateConfig(e){this.config=f(f({},this.config),e)},async getRepos(){try{let e=await qe({login:this.config.login,page:this.repoPage,prePage:this.repoPrePage});e.length<this.repoPrePage?this.repoHasMore=!1:this.repoHasMore=!0,this.repos.push(...e)}catch{}},async getBranches(e){try{let t=await He({login:this.config.login,repo:e});this.branches=t}catch{}},async getBranchCatalogue(e){try{let t=await ze(f({login:this.config.login},e));return this.contents=t,t}catch{}}},getters:{dirsContents:e=>e.contents.filter(t=>t.type==="dir"),imageContents:e=>e.contents.filter(t=>t.type==="file"&&re.getType(t.name).startsWith("image")).map(t=>(t.isMarkdown=e.setting.isMarkdown,t))},persist:{key:"PICR_CONFIG",paths:["config","setting"],storage:localStorage}}),Ne=y(" \u7D2F\u8BA1\u8BBF\u95EE\u6570: "),Ke=m("span",{id:"busuanzi_value_site_uv",class:"uv"},null,-1),Ve=y(" \u6D4F\u89C8\u6B21\u6570: "),je=m("span",{id:"busuanzi_value_site_pv",class:"pv"},null,-1),Fe=[Ne,Ke,Ve,je],Ge={setup(e){const t=k(null),o=k(!1);return ae(()=>{const s=document.createElement("script");s.async=!0,s.src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js",t.value.appendChild(s),s.onload=function(){ie(()=>{o.value=!0})}}),(s,n)=>ce((c(),$("div",{class:"site-count",ref_key:"siteCountDom",ref:t},Fe,512)),[[le,o.value]])}};const N=e=>(pe("data-v-4dcb15f1"),e=e(),de(),e),We={class:"header__left"},Je=N(()=>m("img",{src:Be,class:"logo",alt:""},null,-1)),Qe=[Je],Xe=N(()=>m("h2",{class:"logo__txt"},"PicR",-1)),Ye={class:"login__box"},Ze={key:0,class:"no__login--text"},et={key:1,class:"userinfo"},tt=y("\u9000\u51FA\u767B\u5F55"),ot={setup(e){const t=z(),o=B(),{config:s}=ue(t),n=()=>{t.logout()};return(r,a)=>{const _=he,h=me,w=q,S=H,E=ge,d=fe;return c(),u(d,{class:"header"},{default:i(()=>[m("div",We,[m("h1",{onClick:a[0]||(a[0]=D(at=>p(o).push("/"),["stop"]))},Qe),Xe,l(Ge)]),m("div",Ye,[p(s).id?(c(),$("span",et,M(p(s).login),1)):(c(),$("span",Ze,"\u672A\u767B\u5F55")),p(s).id?(c(),u(E,{key:3},{overlay:i(()=>[l(S,null,{default:i(()=>[l(w,null,{default:i(()=>[l(h,{onClick:D(n,["stop"]),type:"link"},{default:i(()=>[tt]),_:1},8,["onClick"])]),_:1})]),_:1})]),default:i(()=>[l(_,{src:p(s).avatarUrl,size:48},null,8,["src"])]),_:1})):(c(),u(_,{key:2,size:48},{icon:i(()=>[l(p(_e))]),_:1}))])]),_:1})}}};var st=C(ot,[["__scopeId","data-v-4dcb15f1"]]);const nt={setup(e){return(t,o)=>{const s=ve;return c(),u(s,{style:{"min-height":"100vh"}},{default:i(()=>[l(st),l(s,null,{default:i(()=>[l(Ae),l(Te)]),_:1})]),_:1})}}},rt=ye({history:ke(),routes:[{path:"/",component:nt,redirect:"/upload",children:[{path:"/setting",name:"setting",component:()=>v(()=>import("./setting.92bec750.js"),["assets/setting.92bec750.js","assets/setting.285f0f51.css","assets/index.ff7b7785.css","assets/index.cd256673.css","assets/index.1a044952.css","assets/vendor.4554e321.js","assets/vendor.6ca50818.css","assets/index.3c48fa7e.js","assets/index.1ce24a9e.css"]),meta:{title:"\u56FE\u5E8A\u914D\u7F6E",icon:"SettingOutlined"}},{path:"/upload",name:"upload",component:()=>v(()=>import("./upload.4daff681.js"),["assets/upload.4daff681.js","assets/upload.e6d637a2.css","assets/index.ff7b7785.css","assets/index.cd256673.css","assets/index.1a044952.css","assets/vendor.4554e321.js","assets/vendor.6ca50818.css","assets/useCopExternalLinks.e24145de.js","assets/useCopExternalLinks.3477452d.css","assets/index.3c48fa7e.js","assets/index.1ce24a9e.css"]),meta:{title:"\u56FE\u7247\u4E0A\u4F20",icon:"EditOutlined"}},{path:"/imglist",name:"imglist",component:()=>v(()=>import("./imglist.db67b379.js"),["assets/imglist.db67b379.js","assets/imglist.1ddfc2e5.css","assets/index.ff7b7785.css","assets/index.cd256673.css","assets/vendor.4554e321.js","assets/vendor.6ca50818.css","assets/useCopExternalLinks.e24145de.js","assets/useCopExternalLinks.3477452d.css","assets/index.3c48fa7e.js","assets/index.1ce24a9e.css"]),meta:{title:"\u56FE\u5E8A\u7BA1\u7406",icon:"SettingOutlined"}},{path:"/config",name:"config",component:()=>v(()=>import("./config.60ce50bd.js"),["assets/config.60ce50bd.js","assets/config.6a55d595.css","assets/index.ff7b7785.css","assets/vendor.4554e321.js","assets/vendor.6ca50818.css"]),meta:{title:"\u6211\u7684\u914D\u7F6E",icon:"SettingOutlined"}},{path:"/course",name:"course",component:()=>v(()=>import("./course.1e792a30.js"),["assets/course.1e792a30.js","assets/course.a0147496.css","assets/index.ff7b7785.css","assets/index.cd256673.css","assets/index.1a044952.css","assets/vendor.4554e321.js","assets/vendor.6ca50818.css"]),meta:{title:"\u4F7F\u7528\u6559\u7A0B",icon:"PushpinFilled"}}]}]});const K=$e();K.use(Pe);const P=we(be);P.use(rt);P.use(K);P.use(Se);P.mount("#app");export{C as _,ut as a,lt as r,z as u};
