import{b as v,i as F,ad as ie,_ as ce,u as ue,r as m,s as re,ae as de,Q as w,P as pe,g as n,c as x,d as t,k as L,a0 as _e,e as l,a2 as B,af as ve,K as c,h as o,t as g,f as p,ag as ge,ah as he,ai as fe,aj as me,ak as ke,al as ye,j as O,F as A,a4 as be,ab as Ce,B as we,n as xe,v as Me,S as Se,am as ze,an as Be,C as Fe,N as q,ao as De,J as Ee,ap as Le,$ as Re}from"./index.c1da32e6.js";import{i as R,M as He,a as $e,u as Ve,h as Ie}from"./useCopExternalLinks.1a6ddd01.js";/* empty css              */import{u as Ne,c as Te}from"./index.d16996fa.js";/* empty css              */const Ue={class:"icon",viewBox:"0 0 1052 1024",xmlns:"http://www.w3.org/2000/svg",width:"205.469",height:"200"};function je(G,M){return v(),F("svg",Ue,M[0]||(M[0]=[ie('<path d="M25.624 894.84V182.91c0-58.557 47.913-106.47 106.469-106.47h580.386c58.556 0 106.464 47.913 106.464 106.47v92.993" fill="#E3BD84"></path><path d="M25.624 894.84V182.91c0-58.557 47.913-106.47 106.469-106.47h580.386c58.556 0 106.464 47.913 106.464 106.47v92.993" fill="#E3BD84"></path><path d="M708.202 60.844H127.817c-58.557 0-106.47 47.913-106.47 106.47v51.316c0-58.557 47.913-106.47 106.47-106.47h580.385c58.557 0 106.465 47.913 106.465 106.47v-51.317c.004-58.56-47.904-106.469-106.465-106.469z" fill="#FFF" opacity=".15"></path><path d="M19.244 886.322h-4.277V174.391c0-59.887 48.721-108.607 108.603-108.607h580.386c59.886 0 108.607 48.72 108.607 108.607v92.994h-4.276V174.39c0-57.53-46.801-104.331-104.331-104.331H123.574c-57.525 0-104.326 46.805-104.326 104.33v711.932z" fill="#6E6E96"></path><path d="M34.211 886.322H0V174.391C0 106.25 55.435 50.816 123.57 50.816h580.386c68.144 0 123.574 55.435 123.574 123.575v92.994h-34.21V174.39c0-49.277-40.092-89.364-89.364-89.364H123.574c-49.272 0-89.359 40.091-89.359 89.364v711.931z" fill="#6E6E96"></path><path d="M806.174 217.787H303.811c-58.556 0-120.423 45.839-137.468 101.855L13.676 821.257c-14.476 47.562 7.83 87.76 50.722 98.818-3.07-13.731-2.472-29.216 2.51-45.581l152.667-501.615c17.046-56.02 78.912-101.86 137.468-101.86h449.131v-53.232z" fill="#966E6E" opacity=".15"></path><path d="M187.635 377.758c17.041-56.02 78.907-101.855 137.468-101.855h641.341c58.557 0 90.732 45.249 71.501 100.56L862.558 880.676c-19.24 55.307-82.889 100.56-141.441 100.56h-610.68c-58.552 0-92.519-45.844-75.465-101.851l152.663-501.628z" fill="#FFE494"></path><path d="M174.805 411.97c17.042-56.021 78.908-101.856 137.469-101.856h641.341c35.015 0 60.584 16.19 71.377 41.024l.116-.338c19.23-55.31-12.936-100.56-71.501-100.56H312.278c-58.552 0-120.423 45.84-137.468 101.856L22.143 853.71c-6.389 20.989-5.615 40.549.932 56.808l151.73-498.549z" fill="#FFF" opacity=".34"></path><path d="M858.303 821.103c-19.24 55.31-82.893 100.563-141.445 100.563h-610.68c-41.498 0-70.62-23.045-78.005-56.397l-1.72 5.641c-17.05 56.016 16.91 101.85 75.47 101.85h610.68c58.552 0 122.206-45.252 141.445-100.559l175.379-504.214c6.15-17.7 7.026-34.357 3.472-48.84L858.303 821.102z" fill="#966E6E" opacity=".15"></path><path d="M708.343 989.823H97.66c-33.878 0-62.23-13.086-79.836-36.845-17.602-23.76-21.865-54.686-12-87.093l152.671-501.619c19.124-62.85 88.132-113.978 153.83-113.978h641.35c34.01 0 62.016 13.043 78.856 36.73s19.963 54.425 8.793 86.55L865.945 877.785c-21.493 61.773-92.19 112.037-157.602 112.037zM312.33 284.495c-50.842 0-106.303 41.091-121.103 89.727L38.556 875.849c-6.629 21.775-4.23 41.934 6.76 56.76 10.991 14.835 29.58 23.003 52.348 23.003h610.684c51.115 0 108.491-40.788 125.29-89.072l175.378-504.215c7.432-21.374 5.884-41.075-4.362-55.486s-28.348-22.344-50.975-22.344H312.33z" fill="#6E6E96"></path>',10)]))}var Pe={render:je};const Oe={class:"github__config"},Ae={key:0,class:"selectedop__box"},qe={class:"left__op"},Ge={class:"right_btn"},Je={class:"filename"},Ke={class:"filename"},Qe={class:"copy-external-link-box"},We={class:"markdown__icon-box"},Xe={class:"copy__btn--box"},Ye=["onClick"],Ze=["onClick"],et={__name:"imglist",setup(G){const M=ue(),S=m(!1),H=m(),h=m(-1),{config:d,imageContents:s,dirsContents:$}=re(M),u=m([]),f=m({page:0,pageSize:40,countPage:0}),k=m("block"),V=m(!1),y=m("/");de(async()=>{d.value.id||w.warning({content:"\u8BF7\u6C42\u767B\u5F55"}),await z()});const J=a=>{if(a.target.checked)for(let r=0;r<s.value.length;r++)u.value.push(s.value[r].name);else u.value=[]},D=()=>{u.value=[]},K=async()=>{const a=[...De(u.value)];for(let e=0;e<a.length;e++)try{h.value=s.value.findIndex(r=>r.name===a[e]),await Ee({login:d.value.login,repo:d.value.selectedRepo,path:s.value[h.value].path,data:{message:`delete picture via PicR(${location.origin+location.pathname})`,owner:d.value.login,path:s.value[h.value].path,repo:d.value.selectedRepo,sha:s.value[h.value].sha}}),s.value.shift(),u.value.shift(),w.success({content:`${s.value[h.value].name}\u6587\u4EF6\u5220\u9664\u6210\u529F`})}catch(r){console.log(r),w.error({content:`${s.value[h.value].name}\u6587\u4EF6\u5220\u9664\u5931\u8D25`})}finally{h.value=-1}},Q=()=>{let a=[];for(let b=0;b<u.value.length;b++)a.push(R(s.value[u.value[b]].path,!0));const{copy:e,isSupported:r}=Te({source:a.join(",")});if(!r){w.warning({content:"\u62B1\u6B49\u4F60\u7684\u6D4F\u89C8\u5668\u4E0D\u652F\u6301\u590D\u5236\u529F\u80FD"});return}e().then(()=>{w.success({content:"cdn\u5916\u94FE\u590D\u5236\u6210\u529F"})}).catch(()=>{w.error({content:"cdn\u5916\u94FE\u590D\u5236\u5931\u8D25"})})},W=async a=>{y.value=$.value[a].path,await z(),D()},X=async()=>{let a=y.value.split("/");a.length<=1?y.value="/":(a.pop(),y.value=a.join("/")),await z(),D()},Y=()=>{f.value.page=0,z()},Z=()=>H.value.$el,ee=a=>{s.value[a].isMarkdown=!s.value[a].isMarkdown},I=(a,e)=>{Ve(a,{isMarkdown:s.value[e].isMarkdown,githubUrl:Ie(s.value[e].path,!0),jsdelivrUrl:R(s.value[e].path,!0),filename:s.value[e].name},!0)},N=Ne(a=>{f.value.countPage=Math.ceil(s.value.length/f.value.pageSize),!(f.value.page>=f.value.countPage)&&a.target.scrollHeight-a.target.clientHeight-a.target.scrollTop<=200&&f.value.page++}),T=a=>{k.value=a},z=async()=>{try{S.value=!0,M.getBranchCatalogue({repo:d.value.selectedRepo,dir:y.value,query:{ref:d.value.selectedBranch}})}catch{}finally{pe(()=>{S.value=!1})}};return(a,e)=>{const r=be,b=Ce,te=we,_=xe,U=Me,j=Le,le=Re,P=Se,ae=ze,ne=Be,oe=Fe,se=_e;return n(d).id?(v(),x(se,{key:0},{default:t(()=>[l(P,{wrapperClassName:"loading__container",spinning:S.value,tip:"Loading..."},{default:t(()=>[l(oe,{ref_key:"cardContainerRef",ref:H,bordered:"",loading:S.value,headStyle:{paddingRight:"40px","min-height":u.value.length?"94px":""},class:B(["card__container",{hasSelectedOp:u.value.length}])},ve({extra:t(()=>[l(U,{size:"middle"},{default:t(()=>[l(_,null,{title:t(()=>e[13]||(e[13]=[o(" \u8FD4\u56DE\u4E0A\u4E00\u5C42 ")])),default:t(()=>[y.value!=="/"?(v(),x(n(fe),{key:0,onClick:p(X,["stop"]),style:{fontSize:"24px"}})):L("",!0)]),_:1}),l(_,null,{title:t(()=>[o(g(k.value==="block"?"\u5207\u6362\u5217\u8868":"\u5207\u6362\u65B9\u5757"),1)]),default:t(()=>[k.value==="list"?(v(),x(n(me),{key:0,onClick:e[1]||(e[1]=p(i=>T("block"),["stop"])),style:{fontSize:"24px"}})):(v(),x(n(ke),{key:1,onClick:e[2]||(e[2]=p(i=>T("list"),["stop"])),style:{fontSize:"24px"}}))]),_:1}),l(_,null,{title:t(()=>e[14]||(e[14]=[o(" \u91CD\u65B0\u52A0\u8F7D\u56FE\u7247 ")])),default:t(()=>[l(n(ye),{onClick:p(Y,["stop"]),style:{fontSize:"24px"}})]),_:1})]),_:1})]),default:t(()=>[c("div",{onScroll:e[4]||(e[4]=(...i)=>n(N)&&n(N)(...i)),class:"card__body"},[l(ae,{value:u.value,"onUpdate:value":e[3]||(e[3]=i=>u.value=i)},{default:t(()=>[(v(!0),F(A,null,O(n($),(i,C)=>(v(),x(j,{class:B(["card__grid card__dir",{card__block:k.value==="block",card__list:k.value==="list"}]),key:i.name},{default:t(()=>[l(_,null,{title:t(()=>e[15]||(e[15]=[o(" \u53CC\u51FB\u8FDB\u5165 ")])),default:t(()=>[l(n(q),{onDblclick:p(E=>W(C),["stop"]),class:"dir__icon",style:{fontSize:"120px"},component:n(Pe)},null,8,["onDblclick","component"])]),_:2},1024),c("div",Je,g(i.name),1)]),_:2},1032,["class"]))),128)),(v(!0),F(A,null,O(n(s).slice(0,(f.value.page+1)*f.value.pageSize),(i,C)=>(v(),x(j,{key:i.name,class:B(["card__grid card_img",{card__block:k.value==="block",card__list:k.value==="list"}])},{default:t(()=>[l(P,{spinning:h.value===C},{default:t(()=>[l(b,{class:B([{selected:u.value.includes(i.name)},"img__selected_checkbox"]),value:i.name},null,8,["class","value"]),l(le,{src:n(R)(i.path)},null,8,["src"]),c("div",Ke,[l(_,null,{title:t(()=>[o(g(i.name),1)]),default:t(()=>[o(" "+g(i.name),1)]),_:2},1024)]),c("div",Qe,[c("div",We,[l(_,null,{title:t(()=>e[16]||(e[16]=[o(" \u70B9\u51FB\u8F6C\u6362markdown\u683C\u5F0F\u5916\u94FE ")])),default:t(()=>[l(n(q),{onClick:p(E=>ee(C),["stop"]),class:"markdown__icon",component:i.isMarkdown?n($e):n(He)},null,8,["onClick","component"])]),_:2},1024)]),c("div",Xe,[l(_,null,{title:t(()=>e[17]||(e[17]=[o(" \u70B9\u51FB\u590D\u5236GitHub\u5916\u94FE ")])),default:t(()=>[c("span",{onClick:p(E=>I("github",C),["stop"]),class:"copy__btn"},"GitHub",8,Ye)]),_:2},1024),l(_,null,{title:t(()=>e[18]||(e[18]=[o(" \u70B9\u51FB\u590D\u5236CDN\u5916\u94FE ")])),default:t(()=>[c("span",{onClick:p(E=>I("cdn",C),["stop"]),class:"copy__btn"},"CDN",8,Ze)]),_:2},1024)])])]),_:2},1032,["spinning"])]),_:2},1032,["class"]))),128))]),_:1},8,["value"])],32),l(ne,{target:Z})]),_:2},[n(d).id?{name:"title",fn:t(()=>[c("div",Oe,[c("span",null,[e[5]||(e[5]=o(" \u4ED3\u5E93: ")),l(r,{color:"blue"},{default:t(()=>[o(g(n(d).selectedRepo),1)]),_:1})]),c("span",null,[e[6]||(e[6]=o(" \u5206\u652F: ")),l(r,{color:"blue"},{default:t(()=>[o(g(n(d).selectedBranch),1)]),_:1})]),c("span",null,[e[7]||(e[7]=o(" \u76EE\u5F55: ")),l(r,{color:"blue"},{default:t(()=>[o(g(y.value),1)]),_:1})]),c("span",null,[e[8]||(e[8]=o(" \u56FE\u7247\u6570\u91CF: ")),l(r,{color:"blue"},{default:t(()=>[o(g(n(s).length),1)]),_:1})])]),u.value.length?(v(),F("div",Ae,[c("div",qe,[l(b,{checked:V.value,"onUpdate:checked":e[0]||(e[0]=i=>V.value=i),indeterminate:a.indeterminate,onChange:J},{default:t(()=>e[9]||(e[9]=[o(" \u5168\u90E8 ")])),_:1},8,["checked","indeterminate"]),c("div",null,"\u5DF2\u9009\u62E9 "+g(u.value.length)+" \u5F20\u56FE\u7247",1),l(te,{type:"link",onClick:p(D,["stop"])},{default:t(()=>e[10]||(e[10]=[o("\u53D6\u6D88\u9009\u62E9")])),_:1})]),c("div",Ge,[l(U,null,{default:t(()=>[l(_,null,{title:t(()=>e[11]||(e[11]=[o(" \u6279\u91CF\u590D\u5236\u5916\u94FE ")])),default:t(()=>[l(n(ge),{onClick:p(Q,["stop"]),style:{"font-size":"24px"}})]),_:1}),l(_,null,{title:t(()=>e[12]||(e[12]=[o(" \u6279\u91CF\u5220\u9664\u56FE\u7247 ")])),default:t(()=>[l(n(he),{onClick:p(K,["stop"]),style:{"font-size":"24px"}})]),_:1})]),_:1})])])):L("",!0)]),key:"0"}:void 0]),1032,["loading","headStyle","class"])]),_:1},8,["spinning"])]),_:1})):L("",!0)}}};var st=ce(et,[["__scopeId","data-v-2d18d68f"]]);export{st as default};
